const fs=require("fs"),path=require("path"),util=require("./../common/utils"),csslint=require("../custom-csslint/dist/csslint");var errNum=0;function cssTest(s,t){let e,i,r=t.errorLogPath,n=path.join(r,"/css"),o=0,c=!1;return s.forEach(function(s){s.indexOf("goform")>-1||s.indexOf("node_modules")>-1||(i=fs.readFileSync(s,"utf-8"),e=csslint.verify(i,t.cssCheckOptions).messages,o+=e.length,c||(fs.existsSync(r)||fs.mkdirSync(r),fs.existsSync(n)||fs.mkdirSync(n),c=!0),e.length&&fs.writeFileSync(n+"/"+s.split("/").pop().split(".")[0]+".txt",util.dealErrLog(e),"utf8",s=>{if(console.log("写入log文件出现错误"),s)throw s}))},this),o}module.exports=cssTest;