const fs=require("fs"),path=require("path"),util=require("./../common/utils"),HTMLHint=require("../custom-htmlhint/lib/htmlhint").HTMLHint;function htmlTest(t,e){let i,n,o=e.errorLogPath,r=path.join(o,"/html"),s=0,l=!1;return t.forEach(function(t){t.indexOf("goform")>-1||t.indexOf("node_modules")>-1||(n=fs.readFileSync(t,"utf-8"),i=HTMLHint.verify(n,e.htmlCheckOptions),s+=i.length,l||(fs.existsSync(o)||fs.mkdirSync(o),fs.existsSync(r)||fs.mkdirSync(r),l=!0),i.length&&fs.writeFileSync(r+"/"+t.split("/").pop().split(".")[0]+".txt",util.dealErrLog(i),"utf8",t=>{if(console.log("写入log文件出现错误"),t)throw t}))},this),s}module.exports=htmlTest;