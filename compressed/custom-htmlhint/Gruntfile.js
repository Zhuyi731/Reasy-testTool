module.exports=function(e){e.loadNpmTasks("grunt-contrib-clean"),e.loadNpmTasks("grunt-contrib-concat"),e.loadNpmTasks("grunt-contrib-jshint"),e.loadNpmTasks("grunt-contrib-uglify"),e.loadNpmTasks("grunt-replace"),e.loadNpmTasks("grunt-contrib-watch"),e.loadNpmTasks("grunt-exec"),e.initConfig({pkg:e.file.readJSON("package.json"),jshint:{browser:{src:["src/**/*.js"],options:{jshintrc:".jshintrc-browser"}},node:{src:["Gruntfile.js","test/**/*.js","bin/*"],options:{jshintrc:".jshintrc-node"}}},clean:["lib","coverage"],concat:{htmlhint:{src:["src/core.js","src/reporter.js","src/htmlparser.js","src/rules/*.js"],dest:"lib/htmlhint.js"}},exec:{test:{command:'"./node_modules/.bin/mocha" --recursive',stdout:!0,stderr:!0},cover:{command:'"./node_modules/.bin/istanbul" cover "./node_modules/mocha/bin/_mocha" -- --recursive',stdout:!0,stderr:!0}},uglify:{htmlhint:{options:{banner:"/*!\r\n * HTMLHint v<%= pkg.version %>\r\n * https://github.com/yaniswang/HTMLHint\r\n *\r\n * (c) 2014-"+(new Date).getFullYear()+" Yanis Wang <yanis.wang@gmail.com>.\r\n * MIT Licensed\r\n */\n",beautify:{ascii_only:!0}},files:{"lib/<%= pkg.name %>.js":["<%= concat.htmlhint.dest %>"]}}},replace:{version:{files:{"lib/htmlhint.js":"lib/htmlhint.js"},options:{prefix:"@",variables:{VERSION:"<%= pkg.version %>",RELEASE:function(e,s){void 0===s&&(s=e,e=new Date);var t={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),q:Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};return s=s.replace(/([yMdhmsqS])(\1)*/g,function(s,n){var r=t[n];return void 0!==r?(s.length>1&&(r=(r="0"+r).substr(r.length-2)),r):"y"===n?(e.getFullYear()+"").substr(4-s.length):s})}("yyyyMMdd")}}}},watch:{src:{files:["src/**/*.js","test/**/*.js"],tasks:"dev"}}}),e.registerTask("build",["jshint","clean","concat"]),e.registerTask("dev",["build","exec:test"]),e.registerTask("default",["build","exec:cover","uglify","replace:version"])};