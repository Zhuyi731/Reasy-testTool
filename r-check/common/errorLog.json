[{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\index.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'CONFIG_STYLE' is not defined.","line":39,"column":7,"nodeType":"Identifier","source":"\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {","endLine":39,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'CONFIG_STYLE' is not defined.","line":39,"column":34,"nodeType":"Identifier","source":"\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {","endLine":39,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'CONFIG_PRODUCT_MODEL' is not defined.","line":43,"column":20,"nodeType":"Identifier","source":"\t\tdocument.title = CONFIG_PRODUCT_MODEL;","endLine":43,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'B' is not defined.","line":264,"column":4,"nodeType":"Identifier","source":"\t\t\tB.translatePage();","endLine":264,"endColumn":5}],"errorCount":4,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"output":"import $ from 'jquery';\r\nimport 'es5-shim';\r\n\r\nimport './common/css/reasy-ui.css';\r\nimport './common/css/component.scss';\r\nimport './common/css/otherStyle.scss'; //用于保存ip-com或定制风格\r\nimport './common/css/style.css'; //注意此处不要修改此文件位置，否则导致编译后无法在IE8下运行,原因不明@edit by pjl\r\n\r\nimport './common/libs/reasy-ui.js';\r\nimport './common/component/BaseComponent';\r\nimport './common/component/ModalDialog'; //formmessage组件在这个里面\r\n\r\nimport modules from './common/libs/moduleSet.js'; //子模块集合\r\n\r\nimport {\r\n\tmenuObj\r\n}\r\nfrom './common/libs/menu.js'; //菜单对象\r\nimport {\r\n\tdebounce\r\n}\r\nfrom './common/libs/common.js'; //引用debouce方法\r\n\r\nfunction MainLogic(modules, menuObj, ignoredMenu) {\r\n\tlet lastPage = \"wizard\";\r\n\r\n\tlet _mainObj = {\r\n\t\tmodules, menuObj, ignoredMenu\r\n\t};\r\n\r\n\tthis.init = function () {\r\n\t\t_generateStyle();\r\n\t\t_generateMenu(_mainObj.menuObj, _mainObj.ignoredMenu);\r\n\r\n\t\t_initEvent();\r\n\t};\r\n\r\n\tlet _generateStyle = function () {\r\n\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {\r\n\t\t\t$(\"html\").addClass(\"otherStyle\");\r\n\t\t}\r\n\t\t//产品型号；\r\n\t\tdocument.title = CONFIG_PRODUCT_MODEL;\r\n\r\n\t};\r\n\r\n\tlet _initEvent = function () {\r\n\t\tlet tempFn = function (context) {\r\n\t\t\tlet moduleUrl = _clickMenu.call(this);\r\n\t\t\t_loadModule(moduleUrl);\r\n\t\t};\r\n\t\t$('#menuList').on('click', 'a', debounce(tempFn, 200)); //控制200ms之内不能触发两次点击菜单事件\r\n\r\n\t\t//查看帮助信息\r\n\t\t$('.help').on('click', function () {\r\n\t\t\tif ($(this).hasClass('help-close')) {\r\n\t\t\t\t$(this).removeClass('help-close').addClass('help-open');\r\n\t\t\t\t$('.config-box').addClass('none');\r\n\t\t\t\t$('.help-box').removeClass('none');\r\n\t\t\t} else {\r\n\t\t\t\t$(this).removeClass('help-open').addClass('help-close');\r\n\t\t\t\t$('.help-box').addClass('none');\r\n\t\t\t\t$('.config-box').removeClass('none');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//登出\r\n\t\t$('.logout').on('click', function () {\r\n\t\t\t$.post('/logout/Auth', function () {\r\n\t\t\t\twindow.location.href = './login.html';\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t//生成菜单\r\n\tlet _generateMenu = function (menuObj, ignoredMenu) {\r\n\t\tlet str = '',\r\n\t\t\tactiveId = 'wiz-0',\r\n\t\t\tprop, len, id, url, name, className, activeName, activeUrl;\r\n\r\n\t\tfor (prop in menuObj) {\r\n\r\n\t\t\tlen = menuObj[prop].length;\r\n\r\n\t\t\tstr += `<li class=\"nav-list\" id=\"${prop}\">`; //菜单\r\n\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\tid = menuObj[prop][i]['id'];\r\n\t\t\t\turl = menuObj[prop][i]['url'];\r\n\t\t\t\tname = menuObj[prop][i]['name'];\r\n\r\n\r\n\t\t\t\tif (ignoredMenu[id]) { //判断是否为隐藏功能\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (id === activeId) {\r\n\t\t\t\t\tactiveUrl = url;\r\n\t\t\t\t\tactiveName = name;\r\n\t\t\t\t\tclassName = `img-icons-sup ${className}`;\r\n\t\t\t\t}\r\n\t\t\t\tif (i === 0) {\r\n\t\t\t\t\tclassName = menuObj[prop][i]['class'];\r\n\t\t\t\t\tclassName = `img-icons ${className}`;\r\n\r\n\t\t\t\t\t//判断是否有子菜单\r\n\t\t\t\t\tif (len > 1) {\r\n\t\t\t\t\t\tstr += `<a href=\"#\" id=\"${id}\" data-child=\"true\" data-url=\"${url}\" class=\"${className}\"><div>${name}</div></a>`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstr += `<a href=\"#\" id=\"${id}\" data-child=\"false\" data-url=\"${url}\" class=\"${className}\"><div>${name}</div></a>`;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tstr += `<ul style=\"display: none;\" class=\"\">`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstr += `<li><a href=\"#\" id=\"${id}\" data-url=\"${url}\">${name}</a></li>`;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstr += '</ul>';\r\n\t\t\tstr += '</li>';\r\n\t\t}\r\n\t\t$('#menuList').append(str);\r\n\t\tif (activeId) { //生成子菜单\r\n\t\t\tlet activeElm = $(`#${activeId}`);\r\n\r\n\t\t\tactiveElm.parent().addClass('active');\r\n\t\t\tactiveElm.removeClass('img-icons').addClass('img-icons-close');\r\n\t\t\t$('.curTitle').html(activeElm.text());\r\n\t\t\t_loadModule(activeElm.data('url'));\r\n\t\t}\r\n\t};\r\n\r\n\tvar clickFlag = true;\r\n\r\n\t//点击菜单 TODO：可以优化\r\n\tlet _clickMenu = function () {\r\n\t\tlet url = $(this).data('url'),\r\n\t\t\thasChild = $(this).data('child'), //true false undefined\r\n\t\t\t$parent = $(this).parent();\r\n\r\n\r\n\t\tlet speed = 350; //动效速度\r\n\r\n\t\tif (!clickFlag) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//重置状态信息\r\n\t\t$('.active').removeClass('active');\r\n\r\n\t\t//重置菜单文字颜色\r\n\t\t$('.menu-text-focus').removeClass('menu-text-focus');\r\n\t\t$('.menu-text-blur').removeClass('menu-text-blur');\r\n\r\n\t\t//重置菜单图片颜色\r\n\t\t$('.img-icons-open').removeClass('img-icons-open').addClass('img-icons');\r\n\t\t$('.img-icons-close').removeClass('img-icons-close').addClass('img-icons');\r\n\r\n\t\t//重置帮助信息按钮\r\n\t\t$('.help-open').removeClass('help-open').addClass('help-close');\r\n\r\n\t\tif (hasChild) { //如果有子菜单\r\n\t\t\t//下面两个值都为false时，说明是从其它1级菜单切过来\r\n\t\t\tvar preMenuClose = $(this).hasClass(\"menu-close\");\r\n\t\t\tvar preMenuOpen = $(this).hasClass(\"menu-open\");\r\n\r\n\t\t\tif (preMenuOpen) { //展开状态下折叠\r\n\r\n\t\t\t\t$(this).addClass('menu-close').removeClass('menu-open'); //状态类切换\r\n\t\t\t\t$(this).addClass('img-icons-close').removeClass('img-icons'); //图片切换\r\n\t\t\t\t$(this).addClass('menu-text-focus');\r\n\r\n\t\t\t\t$parent.addClass(\"active\"); //背景颜色\r\n\r\n\t\t\t\tclickFlag = false;\r\n\t\t\t\t$parent.find('ul').animate({\r\n\t\t\t\t\t\"height\": 0\r\n\t\t\t\t}, speed, function () {\r\n\t\t\t\t\t$parent.find('ul').hide();\r\n\t\t\t\t\tclickFlag = true;\r\n\t\t\t\t});\r\n\r\n\t\t\t} else { //折叠状态下点击展开1级菜单\r\n\r\n\t\t\t\tclickFlag = false;\r\n\r\n\t\t\t\tif ($('.nav-list').find('.menu-open').length === 0) { //没有展开的菜单时\r\n\t\t\t\t\t$parent.find('ul').height('0');\r\n\t\t\t\t\t$parent.find('ul').show();\r\n\t\t\t\t\tclickFlag = true;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$('.nav-list').find('.menu-open').addClass('menu-close').removeClass('menu-open');\r\n\t\t\t\t\t$('.nav-list').find('ul').animate({\r\n\t\t\t\t\t\t\"height\": 0\r\n\t\t\t\t\t}, speed, function () {\r\n\t\t\t\t\t\t$('.nav-list').find('ul').hide();\r\n\t\t\t\t\t\t$parent.find('ul').show();\r\n\t\t\t\t\t\tclickFlag = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).addClass('menu-open').removeClass('menu-close'); //状态类切换\r\n\t\t\t\t$(this).addClass('img-icons-open').removeClass('img-icons'); //图片切换\r\n\t\t\t\t$(this).addClass('menu-text-blur'); //更新文本颜色\r\n\r\n\t\t\t\t$parent.find('ul').animate({\r\n\t\t\t\t\t\"height\": $parent.find('ul').children().length * 30\r\n\t\t\t\t}, speed);\r\n\r\n\t\t\t\t$parent.find('ul').children().eq(0).addClass('active');\r\n\r\n\t\t\t}\r\n\r\n\t\t\t$('.curTitle').html($parent.find('ul').children().eq(0).text());\r\n\r\n\t\t} else if (hasChild === false) { //如果没有子菜单\r\n\t\t\t$parent.addClass('active');\r\n\t\t\t$(this).addClass('img-icons-close').removeClass('img-icons');\r\n\t\t\t$('.nav-list').find('.menu-open').removeClass('menu-open');\r\n\t\t\tclickFlag = false;\r\n\t\t\t$('.nav-list').find('ul').animate({\r\n\t\t\t\t\"height\": 0\r\n\t\t\t}, speed, function () {\r\n\t\t\t\t$('.nav-list').find('ul').hide();\r\n\t\t\t\tclickFlag = true;\r\n\t\t\t});\r\n\r\n\t\t\t$('.curTitle').html($(this).text());\r\n\t\t} else { //点击某个子菜单\r\n\t\t\t$parent.addClass('active'); //子菜单为active状态\r\n\t\t\t$parent.parent(\"ul\").siblings(\"a\").addClass(\"menu-text-blur img-icons-open\").removeClass(\"img-icons\");\r\n\t\t\t$('.curTitle').html($(this).text());\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t//加载子模块\r\n\tlet _loadModule = function (url) {\r\n\t\tif (!url) return;\r\n\r\n\t\t//用于判断是否超时，超时则跳转\r\n\t\t$.post(\"/goform/getStaticsInfo\", (res) => {\r\n\t\t\tif (res.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//执行之前清除上一个页面所有定时器\r\n\t\tlet tpTimer = _mainObj.modules[lastPage].moduleTimer;\r\n\t\tfor (let prop in tpTimer) {\r\n\t\t\tif (tpTimer.hasOwnProperty(prop)) {\r\n\t\t\t\tclearTimeout(tpTimer[prop]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (_mainObj.modules[lastPage].reset) { //如果模块内有reset函数，则执行\r\n\t\t\t_mainObj.modules[lastPage].reset();\r\n\t\t}\r\n\r\n\r\n\t\t$('#form').load(`/pages/${url}.html`, function (res) {\r\n\t\t\t//执行子模块业务逻辑\r\n\t\t\tB.translatePage();\r\n\t\t\t_mainObj.modules[url].init();\r\n\t\t\tlastPage = url;\r\n\r\n\t\t\t//使页面重新渲染，解决IE8下组件渲染过慢的问题\r\n\t\t\tif ($.support.leadingWhitespace) return;\r\n\t\t\tvar $html = $(\"html\").addClass('fix-ie-font-face');\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t$html.removeClass('fix-ie-font-face');\r\n\t\t\t}, 10);\r\n\t\t});\r\n\t};\r\n}\r\n\r\n$(function () {\r\n\tlet ignoredMenu = {}; //忽略的菜单，以后可以通过功能宏控制\r\n\r\n\tlet hideMenu = []; //隐藏的菜单\r\n\r\n\t$.get('goform/getMainInfo?' + Math.random(), function (res) { //获取主配置信息（当前模式、当前用户类型等）\r\n\t\tlet data = JSON.parse(res);\r\n\t\twindow.G = data;\r\n\r\n\t\tif (G.workMode !== 'router' && G.workMode !== 'wisp') {\r\n\t\t\thideMenu = ['adv-portForward', 'adv-bandwidth', 'adv-macFilter', 'net-mac'];\r\n\t\t} else {\r\n\t\t\thideMenu = [];\r\n\t\t}\r\n\r\n\t\t//根据模式隐藏菜单\r\n\t\tfor (let i = 0; i < hideMenu.length; i++) {\r\n\t\t\t$(`#${hideMenu[i]}`).parent().remove();\r\n\t\t}\r\n\r\n\t\tlet modeObj = {\r\n\t\t\t'ap': _('AP'),\r\n\t\t\t'station': _('Station'),\r\n\t\t\t'universalrepeater': _('Universal Repeater'),\r\n\t\t\t'wisp': _('WISP'),\r\n\t\t\t'repeater': _('Repeater'),\r\n\t\t\t'p2mp': _('P2MP'),\r\n\t\t\t'router': _('Router'),\r\n\t\t\t'client+ap': _('Client + AP')\r\n\t\t};\r\n\r\n\t\t$('.curMode').html(`${_('Current Mode: ')}${modeObj[G.workMode]}`);\r\n\r\n\t});\r\n\r\n\tlet mainLogic = new MainLogic(modules, menuObj, ignoredMenu);\r\n\tmainLogic.init();\r\n});"},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\login.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'CONFIG_STYLE' is not defined.","line":44,"column":7,"nodeType":"Identifier","source":"\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {","endLine":44,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'CONFIG_STYLE' is not defined.","line":44,"column":34,"nodeType":"Identifier","source":"\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {","endLine":44,"endColumn":46},{"ruleId":"no-undef","severity":2,"message":"'CONFIG_PRODUCT_MODEL' is not defined.","line":48,"column":20,"nodeType":"Identifier","source":"\t\tdocument.title = CONFIG_PRODUCT_MODEL;","endLine":48,"endColumn":40},{"ruleId":"no-undef","severity":2,"message":"'CONFIG_PRODUCT_MODEL' is not defined.","line":49,"column":31,"nodeType":"Identifier","source":"\t\t$(\".login-title span\").text(CONFIG_PRODUCT_MODEL);","endLine":49,"endColumn":51},{"ruleId":"no-undef","severity":2,"message":"'B' is not defined.","line":121,"column":7,"nodeType":"Identifier","source":"\t\t\t\t\t\tB.setLang(this.value);","endLine":121,"endColumn":8},{"ruleId":"no-undef","severity":2,"message":"'B' is not defined.","line":125,"column":21,"nodeType":"Identifier","source":"\t\t\t\t\t\tthis.setValue(B.getLang());","endLine":125,"endColumn":22}],"errorCount":6,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import $ from 'jquery';\r\nimport 'es5-shim';\r\n\r\nimport './common/css/reasy-ui.css';\r\nimport './common/css/component.scss';\r\nimport './common/css/login.css';\r\nimport './common/css/otherStyle.scss'; //用于保存ip-com或定制风格\r\nimport './common/css/style.css'; //该文件一定要放在样式文件的最后位置，否则编译后可能在IE8下无法运行，原因不明@edit by pjl\r\n\r\n// import './common/libs/reasy-ui.js';\r\n\r\nimport './common/component/BaseComponent';\r\nimport './common/component/FormInput';\r\nimport './common/component/FormSelect';\r\nimport './common/component/ComponentManage';\r\nimport './common/component/ModalDialog';\r\n\r\n!(function() {\r\n    if ($.support.leadingWhitespace) return;\r\n    $(window).off(\"load.font\").one(\"load.font\", function() {\r\n        var $html = $(\"html\").addClass('fix-ie-font-face');\r\n        setTimeout(function() {\r\n            $html.removeClass('fix-ie-font-face');\r\n        }, 10);\r\n    });\r\n}());\r\n\r\n$(function () {\r\n\tlet main = new Main();\r\n\tmain.gogogo();\r\n});\r\n\r\nlet Main = function () {\r\n\tlet cmp = null;\r\n\tthis.gogogo = function () {\r\n\t\tinitStyle();\r\n\t\tinitComponents();\r\n\t\tinitEvent();\r\n\t};\r\n\r\n\tfunction initStyle() {\r\n\t\t//IP-COM风格或定制风格下，给html标签加ipcom类控制样式，otherStyle.scss文件中的样式会覆盖默认tenda样式\r\n\t\t//otherStyle.scss中的默认样式为ip-com样式\r\n\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {\r\n\t\t\t$(\"html\").addClass(\"otherStyle\");\r\n\t\t}\r\n\t\t//产品型号；\r\n\t\tdocument.title = CONFIG_PRODUCT_MODEL;\r\n\t\t$(\".login-title span\").text(CONFIG_PRODUCT_MODEL);\r\n\t}\r\n\r\n\tfunction initEvent() {\r\n\t\t$(\"#save\").on(\"click\", () => {\r\n\t\t\tpreSubmit();\r\n\t\t});\r\n\r\n\t\t$(\"#username,#password,#country\").on(\"focus\",function(){\r\n\t\t\t$(this).parent().parent().parent().addClass(\"text-focus\");\r\n\t\t});\r\n\r\n\t\t$(\"#username,#password,#country\").on(\"blur\",function(){\r\n\t\t\t$(this).parent().parent().parent().removeClass(\"text-focus\");\r\n\t\t});\r\n\r\n\t\t$(document).on(\"keyup\", function (event) {\r\n\t\t\t//解决火狐浏览器不支持event事件的问题。\r\n\t\t\tlet e = event || window.event,\r\n\t\t\t\tcharCode = e.charCode || e.keyCode;\r\n\r\n\t\t\tif (charCode == 13) { //判断是 “Enter”键\r\n\t\t\t\tif (e.preventDefault) { //阻止浏览器默认事件\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t} else {\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t\t}\r\n\t\t\t\tpreSubmit();\r\n\t\t\t}\r\n\t\t});\r\n\t\t$(\"#forgetpwd\").on(\"mouseover\",()=>{\r\n\t\t\t$(\".tip-wrap\").removeClass(\"none\");\r\n\t\t}).on(\"mouseleave\",()=>{\r\n\t\t\t$(\".tip-wrap\").addClass(\"none\");\r\n\t\t});\r\n\r\n\t\t//解决IE下点击图标无法聚焦输入框的问题\r\n\t\t$(\".password-icon\").on(\"click\",()=>{\r\n\t\t\tif (!$.support.leadingWhitespace) {//IE下\r\n\t\t\t\tif($(\".form-input-eyes\").attr(\"class\").indexOf(\"active\") > -1 ){//明文状态\r\n\t\t\t\t\t$(\"input[name=password][type=text]\").focus();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$(\"input[name=password][type=password]\").focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction initComponents() {\r\n\t\tcmp = $.componentManager({\r\n\t\t\t\"container\": \"#cmps-wrap\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"username\": {\r\n\t\t\t\t\t\"maxLength\": 32,\r\n\t\t\t\t\t\"required\":false,\r\n\t\t\t\t\t\"autoValidate\":false,\r\n\t\t\t\t\t\"placeholder\":_(\"Default user name: admin\")\r\n\t\t\t\t},\r\n\t\t\t\t\"password\": {\r\n\t\t\t\t\t\"required\":false,\r\n\t\t\t\t\t\"maxLength\": 32,\r\n\t\t\t\t\t\"hasEyes\": true,\r\n\t\t\t\t\t\"autoValidate\":false,\r\n\t\t\t\t\t\"placeholder\":_(\"Default password: admin\")\r\n\t\t\t\t},\r\n\t\t\t\t\"country\": {\r\n\t\t\t\t\t\"selectArray\": {//这里不需要翻译\r\n\t\t\t\t\t\t\"cn\": \"简体中文\",\r\n\t\t\t\t\t\t\"en\": \"English\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\t\t\tB.setLang(this.value);\r\n\t\t\t\t\t\tsetTimeout(() => location.reload(), 300);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"renderedCallBack\": function () {\r\n\t\t\t\t\t\tthis.setValue(B.getLang());\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"cn\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tfunction preSubmit() {\r\n\t\tlet subStr = \"\",\r\n\t\t\tusername = cmp.getComponent(\"username\").getValue(),\r\n\t\t\tpassword = cmp.getComponent(\"password\").getValue(),\r\n\t\t\ttimeZoneArr = { \"cn\": -3, \"en\": 0 },\r\n\t\t\tsubObj = {\r\n\t\t\t\t\"username\": username,\r\n\t\t\t\t\"password\": Encode(password),\r\n\t\t\t};\r\n\t\t\tif(username == \"\"){\r\n\t\t\t\tcmp.getComponent(\"username\").focus();\r\n\t\t\t\t$.formMessage(_(\"User name or password is required.\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(password == \"\"){\r\n\t\t\t\tcmp.getComponent(\"password\").focus();\r\n\t\t\t\t$.formMessage(_(\"User name or password is required.\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\tsubObj.timeZone = (timeZoneArr[cmp.getComponent(\"country\").getValue()] + 12) || 20;\r\n\r\n\t\tlet today = new Date(),\r\n\t\t\tyear, mon, day, hour, min, second;\r\n\t\tyear = today.getFullYear().toString();\r\n\t\tmon = today.getMonth() + 1;\r\n\t\tday = today.getDate();\r\n\t\thour = today.getHours();\r\n\t\tmin = today.getMinutes();\r\n\t\tsecond = today.getSeconds();\r\n\t\tsubObj.time = year + \";\" + mon + \";\" + day + \";\" + hour + \";\" + min + \";\" + second;\r\n\r\n\t\t$.post(\"/login/Auth\", subObj, (res) => {\r\n\t\t\tif (res == \"0\") {\r\n\t\t\t\t$.formMessage(_(\"Incorrect user name or password.\"));\r\n\t\t\t\treturn ;\r\n\t\t\t} else{\r\n\t\t\t\twindow.location.href = \"./index.html\";\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tvar Encode = function (s) {\r\n\t\tvar base64EncodeChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\r\n\t\tfunction utf16to8(str) {\r\n\t\t\tvar out,\r\n\t\t\t\ti,\r\n\t\t\t\tlen,\r\n\t\t\t\tc;\r\n\r\n\t\t\tout = \"\";\r\n\t\t\tlen = str.length;\r\n\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\tc = str.charCodeAt(i);\r\n\t\t\t\tif ((c >= 0x0001) && (c <= 0x007F)) {\r\n\t\t\t\t\tout += str.charAt(i);\r\n\t\t\t\t} else if (c > 0x07FF) {\r\n\t\t\t\t\tout += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));\r\n\t\t\t\t\tout += String.fromCharCode(0x80 | ((c >> 6) & 0x3F));\r\n\t\t\t\t\tout += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tout += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F));\r\n\t\t\t\t\tout += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\r\n\t\tfunction base64encode(str) {\r\n\t\t\tvar out,\r\n\t\t\t\ti,\r\n\t\t\t\tlen;\r\n\t\t\tvar c1,\r\n\t\t\t\tc2,\r\n\t\t\t\tc3;\r\n\r\n\t\t\tlen = str.length;\r\n\t\t\ti = 0;\r\n\t\t\tout = \"\";\r\n\t\t\twhile (i < len) {\r\n\t\t\t\tc1 = str.charCodeAt(i++) & 0xff;\r\n\t\t\t\tif (i == len) {\r\n\t\t\t\t\tout += base64EncodeChars.charAt(c1 >> 2);\r\n\t\t\t\t\tout += base64EncodeChars.charAt((c1 & 0x3) << 4);\r\n\t\t\t\t\tout += \"==\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tc2 = str.charCodeAt(i++);\r\n\t\t\t\tif (i == len) {\r\n\t\t\t\t\tout += base64EncodeChars.charAt(c1 >> 2);\r\n\t\t\t\t\tout += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));\r\n\t\t\t\t\tout += base64EncodeChars.charAt((c2 & 0xF) << 2);\r\n\t\t\t\t\tout += '=';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tc3 = str.charCodeAt(i++);\r\n\t\t\t\tout += base64EncodeChars.charAt(c1 >> 2);\r\n\t\t\t\tout += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));\r\n\t\t\t\tout += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >> 6));\r\n\t\t\t\tout += base64EncodeChars.charAt(c3 & 0x3F);\r\n\t\t\t}\r\n\t\t\treturn out;\r\n\t\t}\r\n\t\t// return function (s) {\r\n\t\treturn base64encode(utf16to8(s));\r\n\t\t// }\r\n\t};\r\n};\r\n"},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\lan_dhcp_client\\js\\lan_dhcp_client.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\lan_dhcps\\js\\lan_dhcps.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\lan_speed\\js\\lan_speed.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\lan_vlan\\js\\lan_vlan.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\lan\\js\\lan.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\mac_clone\\js\\mac_clone.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\mac_filter\\js\\mac_filter.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_bandwidth\\js\\net_bandwidth.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_server\\js\\net_server.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_tool\\js\\_ping.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_tool\\js\\_rate_test.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_tool\\js\\_scan_signal.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_tool\\js\\_traceroute.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\net_tool\\js\\net_tool.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\port_forward\\js\\port_forward.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\system_config\\js\\system_config.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\system_log\\js\\system_log.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\system_password\\js\\system_password.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\system_status\\js\\system_status.js","messages":[{"ruleId":"no-undef","severity":2,"message":"'CONFIG_STYLE' is not defined.","line":361,"column":7,"nodeType":"Identifier","source":"\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {","endLine":361,"endColumn":19},{"ruleId":"no-undef","severity":2,"message":"'CONFIG_STYLE' is not defined.","line":361,"column":34,"nodeType":"Identifier","source":"\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {","endLine":361,"endColumn":46}],"errorCount":2,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\r\nimport $ from 'jquery';\r\nimport '../../../common/component/FormList.js';\r\nimport '../../../common/component/FormTab.js';\r\nimport '../../../common/component/FormTable.js';\r\nimport '../../../common/component/FormHelpText.js';\r\n\r\nfunction ModuleLogic(argument) {\r\n\tvar that = this,\r\n\t\tpageData,\r\n\t\tfirstTag = true,\r\n\t\tsysStatusCmp,\r\n\t\tsysTabCmp,\r\n\t\twlanChart,\r\n\t\tlanChart,\r\n\t\ttableCmp = {\r\n\t\t\t\"1\": null,\r\n\t\t\t\"2\": null,\r\n\t\t\t\"3\": null,\r\n\t\t\t\"4\": null,\r\n\t\t\t\"5\": null\r\n\t\t},\r\n\t\tbefTab = \"1\",\r\n\t\ttimer,\r\n\t\tstatusTimer,\r\n\t\turl = {\r\n\t\t\t\"sysStatusUrl\": \"/goform/getSysStatusInfo\",\r\n\t\t\t\"1\": \"goform/getStaticsInfo\",\r\n\t\t\t\"2\": \"goform/getClientList\",\r\n\t\t\t\"3\": \"goform/getInterfaceInfo\",\r\n\t\t\t\"4\": \"goform/getArpTableList\",\r\n\t\t\t\"5\": \"goform/getRouterTableList\"\r\n\t\t};\r\n\t//有些数据后台传过来的不是我们想展示的，做一下转换\r\n\tvar worModeMap = {\r\n\t\t\"ap\": _(\"AP\"),\r\n\t\t\"station\": _(\"Client\"),\r\n\t\t\"universalrepeater\": _(\"Universal Repeater\"),\r\n\t\t\"wisp\": _(\"WISP\"),\r\n\t\t\"repeater\": _(\"Repeater\"),\r\n\t\t\"p2mp\": _(\"P2MP\"),\r\n\t\t\"router\": _(\"Router\")\r\n\t}, secTypeMap = {\r\n\t\t\"none\": _(\"None\"),\r\n\t\t\"wep\": _(\"WEP\"),\r\n\t\t\"wpa-psk\": _(\"WPA-PSK\"),\r\n\t\t\"wpa2-psk\": _(\"WPA2-PSK\"),\r\n\t\t\"mixed wpa/wpa2-psk\": _(\"Mixed WPA/WPA2-PSK\"),\r\n\t\t\"wpa\": _(\"WPA\"),\r\n\t\t\"wpa2\": _(\"WPA2\"),\r\n\t\t\"N/A\": _(\"N/A\")\r\n\t}, wanStatusMap = {\r\n\t\t\"-1\": _(\"Disconnected\"),\r\n\t\t\"0\": _(\"Disconnected\"),\r\n\t\t\"1\": _(\"Connecting...\"),\r\n\t\t\"2\": _(\"Connected\")\r\n\t}, wanTypeMap = {\r\n\t\t\"dhcp\": _(\"DHCP (Dynamic IP)\"),\r\n\t\t\"pppoe\": _(\"PPPoE\"),\r\n\t\t\"static\": _(\"Static IP Address\")\r\n\t}, speedMap = {\r\n\t\t\"0\": _(\"Disconnected\"),\r\n\t\t\"1\": _(\"Connected\"),\r\n\t\t\"-10\": _(\"10 Mbps Half-duplex\"),\r\n\t\t\"10\": _(\"10 Mbps Full-duplex\"),\r\n\t\t\"-100\": _(\"100 Mbps Half-duplex\"),\r\n\t\t\"100\": _(\"100 Mbps Full-duplex\")\r\n\t}, hideMap = [\".data-field-wanIp\", \".data-field-wanGw\", \".data-field-wanDns1\", \".data-field-wanDns2\", \".data-field-wanStatus\", \".data-field-wanType\"];\r\n\t//hideMap是在没有wan口的几种模式的时候，这些选择器的东西需要隐藏\r\n\r\n\t//两个表格的数据\r\n\tvar wlanData = [{\r\n\t\t\"name\": \"RX\",\r\n\t\t\"data\": new Array(10)\r\n\t}, {\r\n\t\t\"name\": \"TX\",\r\n\t\t\"data\": new Array(10)\r\n\t}\r\n\t], lanData = [\r\n\t\t{\r\n\t\t\t\"name\": \"RX\",\r\n\t\t\t\"data\": new Array(10)\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"name\": \"TX\",\r\n\t\t\t\"data\": new Array(10)\r\n\t\t}\r\n\t];\r\n\r\n\tthis.init = function () {\r\n\t\tthis.moduleTimer = {};\r\n\t\tbefTab = \"1\";\r\n\t\tfirstTag = true;\r\n\t\t_initHelpText();\r\n\t\t$.post(url.sysStatusUrl, (res) => {\r\n\t\t\tif (res.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tpageData = JSON.parse(res);\r\n\t\t\t//如果不是wisp模式或者路由模式   \r\n\t\t\t//WAN IP地址  WAN口网关 首选DNS服务器 备用DNS服务器 连接状态 联网方式 都不要显示\r\n\t\t\tfor (var i = 0; i < hideMap.length; i++) {\r\n\t\t\t\tif (!(pageData.wrlStatus.workMode == \"wisp\" || pageData.wrlStatus.workMode == \"router\")) {\r\n\t\t\t\t\t$(hideMap[i]).addClass(\"none\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(hideMap[i]).removeClass(\"none\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t_registerComponents();\r\n\t\t\t_initEvent();\r\n\t\t\t_getData();\r\n\t\t});\r\n\t\tHighcharts.setOptions({\r\n\t\t\t\"lang\": {\r\n\t\t\t\t\"numericSymbols\": [\"M\",\"G\",\"T\",\"P\",\"E\"] // Y轴单位\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 初始化帮助信息\r\n\t */\r\n\tlet _initHelpText = function () {\r\n\t\t$(\"#status-help-text\").FormHelpText({\r\n\t\t\t\"text\": [\r\n\t\t\t\t{ \"title\": _(\"System Status\") },\r\n\t\t\t\t{ \"title\": _(\"Device Name:\"), \"text\": _(\"name of this device. If this device is not the only one of its kind in the network, this name helps you identify the device.\") + _(\"You can change the name of this device on the \\\"Network\\\" > \\\"LAN Setup\\\" page.\") },\r\n\t\t\t\t{ \"title\": _(\"Uptime:\"), \"text\": _(\"time during which this device is operating.\") },\r\n\t\t\t\t{ \"title\": _(\"System Time:\"), \"text\": _(\"current system time of this device.\") + _(\"Format of system time: YYYY-MM-DD hh:mm:ss.\") },\r\n\t\t\t\t{ \"title\": _(\"Firmware Version:\"), \"text\": _(\"system software version number of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"Hardware Version:\"), \"text\": _(\"hardware version of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"Connection Status:\"), \"text\": _(\"connection status of WAN port of this device in WISP  or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Connection Type:\"), \"text\": _(\"internet connection type of this device in WISP or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Default Gateway:\"), \"text\": _(\"default gateway IP address of this device in WISP or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"LAN MAC Address:\"), \"text\": _(\"MAC address of LAN port of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"WLAN MAC Address:\"), \"text\": _(\"MAC address of the wireless network of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"PoE LAN/LAN Speed:\"), \"text\": _(\"connection status of PoE LAN/LAN port. It includes connection rate and duplex mode.\") },\r\n\t\t\t\t{ \"title\": _(\"LAN IP Address:\"), \"text\": _(\"IP address (also called management IP address) of this device. By default, it is 192.168.2.1. You can access the web UI of this device using this IP address.\") },\r\n\t\t\t\t{ \"title\": _(\"WAN IP Address:\"), \"text\": _(\"IP address of WAN port of this device in WISP or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Primary DNS Server:\"), \"text\": _(\"IP address of primary DNS server of this device in WISP or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Secondary DNS Server:\"), \"text\": _(\"IP address of secondary DNS server of this device in WISP or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Wireless Status\") },\r\n\t\t\t\t{ \"title\": _(\"Working Mode:\"), \"text\": _(\"working mode the device operates.\") },\r\n\t\t\t\t{ \"title\": _(\"SSID:\"), \"text\": _(\"wireless network name of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"Security Mode:\"), \"text\": _(\"security mode of the wireless network of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"Channel/Radio Band:\"), \"text\": _(\"channel and radio band used by this device to transmit radio signals.\") },\r\n\t\t\t\t{ \"title\": _(\"No. of Wireless Client:\"), \"text\": _(\"number of wireless clients connected to this device.\") },\r\n\t\t\t\t{ \"title\": _(\"AP's MAC Address:\"), \"text\": _(\"it displays \\\"No Peer AP\\\" if the device works in AP or Router mode. And in other modes, it displays the MAC address of peer AP that this device bridged.\") },\r\n\t\t\t\t{ \"title\": _(\"Signal Strength:\"), \"text\": _(\"it displays the signal strength of the first device connected to the wireless network of the device when it works in AP or Router mode.\") + _(\"it displays the received signal strength from peer AP when the device works in Client, Universal Repeater, WISP, Repeater or P2MP mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Background Noise:\"), \"text\": _(\"strength of radio interference signals in the ambient environment that interfere with the channel of this device. Larger absolute number indicates less interference.\") },\r\n\t\t\t\t{ \"title\": _(\"TX/RX Link:\"), \"text\": _(\"number of spatial streams the device is transmitting or receiving.\") },\r\n\t\t\t\t{ \"title\": _(\"Transmit/Receive Rate:\"), \"text\": _(\"it displays transmit/receive rate of the first device connected to the wireless network of this device when it works in AP or Router mode,\") + _(\"and displays transmit/receive rate of this device in Client, Universal Repeater, WISP, Repeater, or P2MP mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Statistics\") },\r\n\t\t\t\t{ \"title\": _(\"Throughput:\"), \"text\": _(\"data throughput of the device through LAN ports or WLAN.\") },\r\n\t\t\t\t{ \"title\": _(\"Upstream AP:\"), \"text\": _(\"information of current APs connected to this device when the device works in Client, Universal Repeater, or WISP mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Wireless Client:\"), \"text\": _(\"information of current wireless clients connected to this device when the device works in AP, Repeater, P2MP or Router mode.\") },\r\n\t\t\t\t{ \"title\": _(\"Interface:\"), \"text\": _(\"IP address, MAC address and throughput information of device's interfaces.\") },\r\n\t\t\t\t{ \"title\": _(\"ARP Table:\"), \"text\": _(\"the current ARP table of this device.\") },\r\n\t\t\t\t{ \"title\": _(\"Routing Table:\"), \"text\": _(\"routing information of this device.\") }\r\n\t\t\t]\r\n\t\t});\r\n\t};\r\n\r\n\tlet _registerComponents = function () {\r\n\t\tlet forData = {\r\n\t\t\t\"dataField\":\"systemStatus\",\r\n\t\t\t\"css\": \"formlist-wrap\",\r\n\t\t\t\"dataObj\": pageData,\r\n\t\t\t\"titleObj\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"field\": \"sysStatus\",\r\n\t\t\t\t\t\"title\": _(\"System Status\"),\r\n\t\t\t\t\t\"items\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"devName\", \"title\": _(\"Device Name\"), \"maxLength\": 10, \"parseHtml\": true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"lanMac\", \"title\": _(\"LAN MAC Address\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"runTime\", \"title\": _(\"Uptime\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wrlMac\", \"title\": _(\"WLAN MAC Address\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"sysTime\", \"title\": _(\"System Time\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"lanSpeed\", \"title\": _(\"PoE LAN/LAN Speed\"), \"maxLength\": 15\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"fireversion\", \"title\": _(\"Firmware Version\"), \"parseHtml\": true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"lanIp\", \"title\": _(\"LAN IP Address\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"hwVersion\", \"title\": _(\"Hardware Version\"), \"parseHtml\": true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wanIp\", \"title\": _(\"WAN IP Address\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// { to show 这个版本没有距离\r\n\t\t\t\t\t\t// \tfield: \"devDist\", title: _(\"距离\")\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wanStatus\", \"title\": _(\"Connection Status\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wanDns1\", \"title\": _(\"Primary DNS Server\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wanType\", \"title\": _(\"Connection Type\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wanDns2\", \"title\": _(\"Secondary DNS Server\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"wanGw\", \"title\": _(\"Default Gateway\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"field\": \"wrlStatus\",\r\n\t\t\t\t\t\"title\": _(\"Wireless Status\"),\r\n\t\t\t\t\t\"items\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"field\": \"workMode\", \"title\": _(\"Working Mode\")\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"remoteApMac\", \"title\": _(\"AP's MAC Address\")\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"ssid\", \"title\": _(\"SSID\"), \"maxLength\": 12, \"parseHtml\": true\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"signal\", \"title\": _(\"Signal Strength\"), \"noTitle\": true\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"secType\", \"title\": _(\"Security Mode\")\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"noise\", \"title\": _(\"Background Noise\"), \"noTitle\": true\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"channelBand\", \"title\": _(\"Channel/Radio Band\")\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"txLink\", \"title\": _(\"TX/RX Link\")\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"wrlClient\", \"title\": _(\" Wireless Client\")\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\"field\": \"txSpeed\", \"title\": _(\"Transmit/Receive Speed\"), \"maxLength\": 14\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}, selectArray = {\r\n\t\t\t\"1\": _(\"Throughput\"),\r\n\t\t\t\"2\": _(\"Wireless Client\"),\r\n\t\t\t\"3\": _(\"Interface\"),\r\n\t\t\t\"4\": _(\"ARP Table\"),\r\n\t\t\t\"5\": _(\"Routing Table\")\r\n\t\t};\r\n\t\t//这三种模式下  无线客户端要变成上级AP\r\n\t\tif (pageData.wrlStatus.workMode == \"station\" || pageData.wrlStatus.workMode == \"universalrepeater\" || pageData.wrlStatus.workMode == \"wisp\") {\r\n\t\t\tselectArray[\"2\"] = _(\"Upstream AP\");\r\n\t\t} \r\n\r\n\t\tsysStatusCmp = $(\"#systemStatus\").FormList(forData);\r\n\r\n\r\n\t\tsysTabCmp = $(\"#statusTab\").Rcomponent({\r\n\t\t\t\"dataField\":\"table-tabs\",\r\n\t\t\t\"selectArray\": selectArray,\r\n\t\t\t\"theme\": \"bg-theme\",\r\n\t\t\t\"defaultValue\": 1, //默认选中的按钮项\r\n\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\tlet index = this.value;\r\n\t\t\t\t//点击的还是原来的tab时不做处理\r\n\t\t\t\tif (befTab == index) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//隐藏上一个tab的内容\r\n\t\t\t\t\t$(\"#tab\" + befTab).addClass(\"none\");\r\n\t\t\t\t\tbefTab = index;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (index == \"1\") {//吞吐量信息为图表\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t$.post(url[index], (res) => {\r\n\t\t\t\t\t\tdrawGrid(res);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {//其余为表格\r\n\t\t\t\t\t//清除之前的timer\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t\t$.post(url[index], function (res) {\r\n\t\t\t\t\t\tres = JSON.parse(res).list;\r\n\t\t\t\t\t\ttableCmp[index].reLoad(res);\r\n\t\t\t\t\t\tif(that.moduleTimer.statusTableTimer){\r\n\t\t\t\t\t\t\tclearTimeout(that.moduleTimer.statusTableTimer);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttimer = setTimeout(function () {\r\n\t\t\t\t\t\t\tgetTableData(index);\r\n\t\t\t\t\t\t}, 5000);\r\n\r\n\t\t\t\t\t\t//把timer放入moduleTimer里以便切换菜单时清除所有timer\r\n\t\t\t\t\t\tthat.moduleTimer.statusTableTimer = timer;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#tab\" + index).removeClass(\"none\");\r\n\r\n\t\t\t},\r\n\t\t\t\"renderedCallBack\": function () {\r\n\t\t\t\t$.post(url[\"1\"], (res) => {\r\n\t\t\t\t\tdrawGrid(res);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\r\n\t\t//统计信息表格组件\r\n\t\t//无线客户端表格\r\n\t\ttableCmp[\"2\"] = $(\"#statusTable2\").TablePage({\r\n\t\t\t\"columns\": [\r\n\t\t\t\t{ \"title\": _(\"IP Address\"), \"field\": \"ip\" },\r\n\t\t\t\t{ \"title\": _(\"MAC Address\"), \"field\": \"mac\" },\r\n\t\t\t\t{ \"title\": _(\"Signal/Noise\"), \"field\": \"sign\" },\r\n\t\t\t\t{ \"title\": _(\"Transmit/Receive\"), \"field\": \"tx\" },\r\n\t\t\t\t{ \"title\": _(\"CCQ\"), \"field\": \"cqq\" },\r\n\t\t\t\t{ \"title\": _(\"Connection Duration\"), \"field\": \"connectTime\", \"format\": function (data) { return timeToDate(data); } }\r\n\t\t\t], \"showStyle\": 2\r\n\t\t});\r\n\t\t//接口表格\r\n\t\ttableCmp[\"3\"] = $(\"#statusTable3\").TablePage({\r\n\t\t\t\"columns\": [\r\n\t\t\t\t{ \"title\": _(\"Interface\"), \"field\": \"interface\" },\r\n\t\t\t\t{ \"title\": _(\"IP Address\"), \"field\": \"ip\" },\r\n\t\t\t\t{ \"title\": _(\"MAC Address\"), \"field\": \"mac\" },\r\n\t\t\t\t{ \"title\": _(\"Received Packets\"), \"field\": \"rx\" },\r\n\t\t\t\t{ \"title\": _(\"Receive Error\"), \"field\": \"rxErr\" },\r\n\t\t\t\t{ \"title\": _(\"Transmitted Packets\"), \"field\": \"tx\" },\r\n\t\t\t\t{ \"title\": _(\"Transmit Error\"), \"field\": \"txErr\" }\r\n\t\t\t], \"showStyle\": 2\r\n\t\t});\r\n\t\t//ARP表\r\n\t\ttableCmp[\"4\"] = $(\"#statusTable4\").TablePage({\r\n\t\t\t\"columns\": [\r\n\t\t\t\t{ \"title\": _(\"IP Address\"), \"field\": \"ip\" },\r\n\t\t\t\t{ \"title\": _(\"MAC Address\"), \"field\": \"mac\" },\r\n\t\t\t\t{ \"title\": _(\"Interface\"), \"field\": \"interface\" }\r\n\t\t\t], \"showStyle\": 2\r\n\t\t});\r\n\t\t//路由表\r\n\t\ttableCmp[\"5\"] = $(\"#statusTable5\").TablePage({\r\n\t\t\t\"columns\": [\r\n\t\t\t\t{ \"title\": _(\"Destination Network\"), \"field\": \"ip\" },\r\n\t\t\t\t{ \"title\": _(\"Subnet Mask\"), \"field\": \"mask\" },\r\n\t\t\t\t{ \"title\": _(\"Next Hop\"), \"field\": \"next\" },\r\n\t\t\t\t{ \"title\": _(\"Interface\"), \"field\": \"interface\" }\r\n\t\t\t], \"showStyle\": 2\r\n\t\t});\r\n\t\t//highcharts折线图基础配置\r\n\t\tvar lineColors = [\"#ff6600\", \"#7ed321\"];\r\n\t\tif (CONFIG_STYLE == \"IPCOM\" || CONFIG_STYLE == \"CUSTOM\") {\r\n\t\t\tlineColors = [\"#d82228\", \"#7ed321\"];\r\n\t\t}\r\n\r\n\t\tlet baseCfg = {\r\n\t\t\t\"colors\": [\"#ff6600\", \"#7ed321\"],\r\n\t\t\t\"height\": 400,\r\n\t\t\t\"credits\": { //屏蔽版权信息\r\n\t\t\t\t\"enabled\": false\r\n\t\t\t}, \"legend\": {//标题位置\r\n\t\t\t\t\"layout\": 'vertical',\r\n\t\t\t\t\"align\": 'center',\r\n\t\t\t\t\"verticalAlign\": 'top'\r\n\t\t\t},\r\n\t\t\t\"yAxis\": {\r\n\t\t\t\t\"label\": {\r\n\t\t\t\t\t\"align\": \"left\",\r\n\t\t\t\t\t\"Enabled\": true\r\n\t\t\t\t},\r\n\t\t\t\t\"min\": 0,\r\n\t\t\t\t\"minPadding\":0,\r\n\t\t\t\t\"startOnTick\":true,\r\n\t\t\t\t\"minRange\": 1,\r\n\t\t\t\t\"lineColor\": \"#ccc\",\r\n\t\t\t\t\"title\": {\r\n\t\t\t\t\t\"text\": null\r\n\t\t\t\t},\r\n\t\t\t\t\"showFirstLabel\": false\r\n\t\t\t},\r\n\t\t\t\"xAxis\": {\r\n\t\t\t\t\"labels\": true,\r\n\t\t\t\t\"step\": 1,\r\n\t\t\t\t\"lineColor\": \"#ccc\",\r\n\t\t\t\t\"lineWidth\": 0,\r\n\t\t\t\t\"showFirstLabel\": false,\r\n\t\t\t\t\"type\": \"linear\"\r\n\t\t\t},\r\n\t\t\t\"plotOptions\": {\r\n\t\t\t\t\"series\": {\r\n\t\t\t\t\t\"label\": {\r\n\t\t\t\t\t\t\"connectorAllowed\": false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"pointStart\": 0,\r\n\t\t\t\t\t\"lineWidth\": 1\r\n\t\t\t\t},\r\n\t\t\t\t\"line\": {\r\n\t\t\t\t\t\"softThreshold\": false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"tooltip\": {\r\n\t\t\t\t\"shared\": true,\r\n\t\t\t\t\"useHTML\": true,\r\n\t\t\t\t\"headerFormat\": '<table>',\r\n\t\t\t\t\"pointFormatter\": function () {\r\n\t\t\t\t\tlet value = getSpeedUnit(this.y),\r\n\t\t\t\t\t\tname = this.series.name.substr(0, 2);\r\n\t\t\t\t\treturn `<tr><td style=\"color: ${this.series.color}\">${name}: </td><td style=\"text-align: right\"><b> ${value} </b></td></tr>`;\r\n\t\t\t\t},\r\n\t\t\t\t\"footerFormat\": '</table>',\r\n\t\t\t\t\"valueDecimals\": 2,\r\n\t\t\t\t\"crosshairs\": [true, true]  // 同时启用竖直及水平准星线\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\twlanChart = $.extend({ \"series\": [{ \"name\": 'TX', \"data\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }, { \"name\": 'RX', \"data\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }], \"title\": { \"text\": \"WLAN\", \"align\": \"left\", \"verticalAlign\": \"top\" } }, baseCfg);\r\n\t\tlanChart = $.extend({ \"series\": [{ \"name\": 'TX', \"data\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }, { \"name\": 'RX', \"data\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }], \"title\": { \"text\": \"LAN\", \"align\": \"left\", \"verticalAlign\": \"top\" } }, baseCfg);\r\n\t};\r\n\r\n\t/**\r\n\t * 更新折线图数据\r\n\t * 绘制折线图\r\n\t * 更新定时器\r\n\t * @param {*折线图图表数据} res \r\n\t */\r\n\tfunction drawGrid(res) {\r\n\t\tlet data = JSON.parse(res);\r\n\t\twlanChart.series[0].data.shift();//移除数组最左边的，保证只显示10个数据\r\n\t\twlanChart.series[0].data.push(parseFloat(data.wireless.rx));//再向末尾添加数据\r\n\t\twlanChart.series[0].name = \"RX\" + getSpeedUnit(data.wireless.rx);\r\n\t\twlanChart.series[1].data.shift();\r\n\t\twlanChart.series[1].data.push(parseFloat(data.wireless.tx));\r\n\t\twlanChart.series[1].name = \"TX\" + getSpeedUnit(data.wireless.tx);\r\n\t\tlanChart.series[0].data.shift();\r\n\t\tlanChart.series[0].data.push(parseFloat(data.lan.rx));\r\n\t\tlanChart.series[0].name = \"RX\" + getSpeedUnit(data.lan.rx);\r\n\t\tlanChart.series[1].data.shift();\r\n\t\tlanChart.series[1].data.push(parseFloat(data.lan.tx));\r\n\t\tlanChart.series[1].name = \"TX\" + getSpeedUnit(data.lan.tx);\r\n\r\n\t\tlet wlan = Highcharts.chart('chart1', wlanChart);\r\n\t\tlet lan = Highcharts.chart('chart2', lanChart);\r\n\t\tif(that.moduleTimer.statusTableTimer){\r\n\t\t\tclearTimeout(that.moduleTimer.statusTableTimer);\r\n\t\t}\r\n\t\ttimer = setTimeout(function () {\r\n\t\t\t$.post(url[\"1\"], (res) => {\r\n\t\t\t\tdrawGrid(res);\r\n\t\t\t});\r\n\t\t}, 5000);\r\n\t\tthat.moduleTimer.statusTableTimer = timer;\r\n\t}\r\n\r\n\tlet _initEvent = function () {\r\n\r\n\t};\r\n\r\n\tlet _getData = function () {\r\n\r\n\t\t$.post(url.sysStatusUrl, (res) => {\r\n\t\t\tif (res.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tlet data = JSON.parse(res);\r\n\t\t\tsysStatusCmp.reload(formatData(data));\r\n\t\t\t//IE下加载不是很快，为了使加载不是那么突兀\r\n\t\t\tif (firstTag) {\r\n\t\t\t\t$(\"#tab-wrap\").css(\"visibility\", \"visible\");\r\n\t\t\t\tfirstTag = false;\r\n\t\t\t}\r\n\t\t\t//如果不是wisp模式或者路由模式   \r\n\t\t\t//WAN IP地址  WAN口网关 首选DNS服务器 备用DNS服务器 连接状态 联网方式 都不要显示\r\n\t\t\tfor (var i = 0; i < hideMap.length; i++) {\r\n\t\t\t\tif (!(data.wrlStatus.workMode == \"wisp\" || data.wrlStatus.workMode == \"router\")) {\r\n\t\t\t\t\t$(hideMap[i]).addClass(\"none\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(hideMap[i]).removeClass(\"none\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(that.moduleTimer.statusTimer){\r\n\t\t\t\tclearTimeout(that.moduleTimer.statusTimer);\r\n\t\t\t}\r\n\t\t\tstatusTimer = setTimeout(function () {\r\n\t\t\t\t_getData();\r\n\t\t\t}, 5000);\r\n\t\t\tthat.moduleTimer.statusTimer = statusTimer;\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 有些数据格式不是我们想要的，需要做一下转换\r\n\t * @param {*格式化之前的数据} befData \r\n\t * @return {*格式化之后的数据} afterData\r\n\t */\r\n\tfunction formatData(befData) {\r\n\t\tlet afterData = {};\r\n\t\tlet sysData = $.extend({}, befData.sysStatus);\r\n\t\tlet wrlData = $.extend({}, befData.wrlStatus);\r\n\r\n\t\t//转换系统状态数据\r\n\t\t//把时间由s转换为时分秒\r\n\t\tlet time = parseInt(sysData.runTime);\r\n\t\tsysData.runTime = timeToDate(time);\r\n\t\t//把LAN口速率转换为中文\t\r\n\t\tsysData.lanSpeed = speedMap[befData.sysStatus.lanSpeed.split(\"/\")[0]] + \"/\" + speedMap[befData.sysStatus.lanSpeed.split(\"/\")[1]];\r\n\t\t//把接入状态转换成中文\r\n\t\tsysData.wanStatus = wanStatusMap[befData.sysStatus.wanStatus];\r\n\r\n\r\n\r\n\t\t//把接入方式转换成中文\r\n\t\tsysData.wanType = wanTypeMap[befData.sysStatus.wanType];\r\n\t\t//转换无线状态数据\r\n\t\twrlData.workMode = worModeMap[wrlData.workMode];//翻译\r\n\t\twrlData.secType = secTypeMap[wrlData.secType];\r\n\t\tif (wrlData.signal != \"N/A\") {\r\n\t\t\t//把两个数据转换成有图行长度的显示\r\n\t\t\twrlData.signal = '<span style=\"width: 100px;height: 10px;background: #fff;border: 1px solid #ccc;margin-top: 5px;display:inline-block;\">' +\r\n\t\t\t\t'<div id=\"signalLength\" style=\"height: 10px;background: skyblue;width:' + (100 + parseInt(wrlData.signal, 10)) + 'px\"> </div> </span>' + '<span id=\"signal\"> ' + wrlData.signal + 'dBm</span>';\r\n\t\t}\r\n\t\tif (wrlData.noise != \"N/A\") {\r\n\t\t\twrlData.noise = '<div style=\"width:102px;height:10px;display:inline-block\"><span style=\"width: 100%;height: 10px;background: #fff;border: 1px solid #ccc;margin-top: 5px;display:inline-block;\">' +\r\n\t\t\t\t'<div id=\"signalLength\" style=\"height: 10px;background: skyblue;width:' + parseInt((120 + parseInt(wrlData.noise, 10))*100/120) + '%\"> </div> </span></div>' + '<span id=\"noise\"> ' + wrlData.noise + 'dBm</span>';\r\n\t\t}\r\n\t\tif (wrlData.channelBand != \"N/A\") {\r\n\t\t\t//信道加上频段\r\n\t\t\twrlData.channelBand = wrlData.channelBand + \"/\" + (parseInt(wrlData.channelBand) * 5 + 2407).toString();\r\n\t\t}\r\n\r\n\t\tafterData.sysStatus = sysData;\r\n\t\tafterData.wrlStatus = wrlData;\r\n\t\treturn afterData;\r\n\t}\r\n\r\n\tfunction getSpeedUnit(speed) {\r\n\t\tlet ret = \" \" + parseFloat(speed).toFixed(2) + \" Kbps\";\r\n\t\tif (speed > 1000000) {\r\n\t\t\tret = \" \" + parseFloat(speed / 1000000).toFixed(2) + \" Gbps\";\r\n\t\t} else if (speed > 1000) {\r\n\t\t\tret = \" \" + parseFloat(speed / 1000).toFixed(2) + \" Mbps\";\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n\r\n\t/**\r\n\t * 获取统计信息里的表格数据\t\r\n\t * @param {*表示第几个表格} index \r\n\t */\r\n\tfunction getTableData(index) {\r\n\t\t$.post(url[index], function (res) {\r\n\r\n\t\t\tif (res.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tres = JSON.parse(res).list;\r\n\t\t\ttableCmp[index].reLoad(res);\r\n\t\t\t// if (!$.support.leadingWhitespace) {\r\n\t\t\t// \tvar $html = $(\"html\").addClass('fix-ie-font-face');\r\n\t\t\t// \tsetTimeout(function () {\r\n\t\t\t// \t\t$html.removeClass('fix-ie-font-face');\r\n\t\t\t// \t}, 10);\r\n\t\t\t// }\r\n\t\t\tif(that.moduleTimer.statusTableTimer){\r\n\t\t\t\tclearTimeout(that.moduleTimer.statusTableTimer);\r\n\t\t\t}\r\n\t\t\ttimer = setTimeout(function () {\r\n\t\t\t\tgetTableData(index);\r\n\t\t\t}, 5000);\r\n\t\t\tthat.moduleTimer.statusTableTimer = timer;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 将秒转换成x天x小时x分x秒的格式\r\n\t * @param {*时间  单位s} time \r\n\t */\r\n\tfunction timeToDate(time) {\r\n\t\tlet date = \"\";\r\n\t\ttime = parseInt(time);\r\n\t\tdate += Math.floor(time / 86400) > 0 ? Math.floor(time / 86400) + _(\" d\") : \"\";\r\n\t\tdate += Math.floor(time / 3600 % 24) > 0 ? Math.floor(time / 3600 % 24) + _(\" h\") : \"\";\r\n\t\tdate += Math.floor(time / 60 % 60) > 0 ? Math.floor(time / 60 % 60) + _(\" m\") : \"\";\r\n\t\tdate += Math.floor(time % 60) > 0 ? Math.floor(time % 60) + _(\" s\") : \"\";\r\n\t\treturn date;\r\n\t}\r\n}\r\n\r\nmodule.exports = new ModuleLogic();"},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\system_time\\js\\system_time.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\apMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\p2mpMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\repeaterMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\routerMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\stationMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\universalrepeaterMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\wispMode.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\wizard.js","messages":[{"ruleId":"block-scoped-var","severity":2,"message":"'$html' used outside of binding context.","line":150,"column":9,"nodeType":"Identifier","source":"\t\t\t\tvar $html = $(\"html\").addClass('fix-ie-font-face');","messageId":"outOfScope","endLine":150,"endColumn":14},{"ruleId":"block-scoped-var","severity":2,"message":"'$html' used outside of binding context.","line":152,"column":6,"nodeType":"Identifier","source":"\t\t\t\t\t$html.removeClass('fix-ie-font-face');","messageId":"outOfScope","endLine":152,"endColumn":11},{"ruleId":"no-redeclare","severity":2,"message":"'$html' is already defined.","line":161,"column":9,"nodeType":"Identifier","source":"\t\t\t\tvar $html = $(\"html\").addClass('fix-ie-font-face');","endLine":161,"endColumn":14},{"ruleId":"block-scoped-var","severity":2,"message":"'$html' used outside of binding context.","line":161,"column":9,"nodeType":"Identifier","source":"\t\t\t\tvar $html = $(\"html\").addClass('fix-ie-font-face');","messageId":"outOfScope","endLine":161,"endColumn":14},{"ruleId":"block-scoped-var","severity":2,"message":"'$html' used outside of binding context.","line":163,"column":6,"nodeType":"Identifier","source":"\t\t\t\t\t$html.removeClass('fix-ie-font-face');","messageId":"outOfScope","endLine":163,"endColumn":11},{"ruleId":"no-undef","severity":2,"message":"'checkIpInSameSegment' is not defined.","line":837,"column":10,"nodeType":"Identifier","source":"\t\t\t\t\tif (checkIpInSameSegment(staticIp, staticMask, that.pageData.initData.lanIp, that.pageData.initData.lanMask)) {","endLine":837,"endColumn":30},{"ruleId":"no-undef","severity":2,"message":"'checkIpInSameSegment' is not defined.","line":1047,"column":8,"nodeType":"Identifier","source":"\t\tif (!checkIpInSameSegment(lanIp, lanMask, lanGateway, lanMask)) {","endLine":1047,"endColumn":28},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1268,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","messageId":"outOfScope","endLine":1268,"endColumn":19},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1268,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","messageId":"outOfScope","endLine":1268,"endColumn":19},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1269,"column":42,"nodeType":"Identifier","source":"\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {","messageId":"outOfScope","endLine":1269,"endColumn":46},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1269,"column":42,"nodeType":"Identifier","source":"\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {","messageId":"outOfScope","endLine":1269,"endColumn":46},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1271,"column":12,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1271,"endColumn":16},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1271,"column":12,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1271,"endColumn":16},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1271,"column":33,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1271,"endColumn":37},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1271,"column":33,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1271,"endColumn":37},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1272,"column":25,"nodeType":"Identifier","source":"\t\t\t\t\t\t\t\tcomp.components[prop].hide();","messageId":"outOfScope","endLine":1272,"endColumn":29},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1272,"column":25,"nodeType":"Identifier","source":"\t\t\t\t\t\t\t\tcomp.components[prop].hide();","messageId":"outOfScope","endLine":1272,"endColumn":29},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1283,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","messageId":"outOfScope","endLine":1283,"endColumn":19},{"ruleId":"no-redeclare","severity":2,"message":"'prop' is already defined.","line":1283,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","endLine":1283,"endColumn":19},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1283,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","messageId":"outOfScope","endLine":1283,"endColumn":19},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1284,"column":42,"nodeType":"Identifier","source":"\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {","messageId":"outOfScope","endLine":1284,"endColumn":46},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1284,"column":42,"nodeType":"Identifier","source":"\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {","messageId":"outOfScope","endLine":1284,"endColumn":46},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":12,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":16},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":12,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":16},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":33,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":37},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":33,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":37},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":55,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":59},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":55,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":59},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":82,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":86},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1286,"column":82,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {","messageId":"outOfScope","endLine":1286,"endColumn":86},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1287,"column":25,"nodeType":"Identifier","source":"\t\t\t\t\t\t\t\tcomp.components[prop].show();","messageId":"outOfScope","endLine":1287,"endColumn":29},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1287,"column":25,"nodeType":"Identifier","source":"\t\t\t\t\t\t\t\tcomp.components[prop].show();","messageId":"outOfScope","endLine":1287,"endColumn":29},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1295,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","messageId":"outOfScope","endLine":1295,"endColumn":19},{"ruleId":"no-redeclare","severity":2,"message":"'prop' is already defined.","line":1295,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","endLine":1295,"endColumn":19},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1295,"column":15,"nodeType":"Identifier","source":"\t\t\t\t\tfor (var prop in comp.components) {","messageId":"outOfScope","endLine":1295,"endColumn":19},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1296,"column":42,"nodeType":"Identifier","source":"\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {","messageId":"outOfScope","endLine":1296,"endColumn":46},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1296,"column":42,"nodeType":"Identifier","source":"\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {","messageId":"outOfScope","endLine":1296,"endColumn":46},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1298,"column":12,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1298,"endColumn":16},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1298,"column":12,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1298,"endColumn":16},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1298,"column":33,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1298,"endColumn":37},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1298,"column":33,"nodeType":"Identifier","source":"\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {","messageId":"outOfScope","endLine":1298,"endColumn":37},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1299,"column":25,"nodeType":"Identifier","source":"\t\t\t\t\t\t\t\tcomp.components[prop].hide();","messageId":"outOfScope","endLine":1299,"endColumn":29},{"ruleId":"block-scoped-var","severity":2,"message":"'prop' used outside of binding context.","line":1299,"column":25,"nodeType":"Identifier","source":"\t\t\t\t\t\t\t\tcomp.components[prop].hide();","messageId":"outOfScope","endLine":1299,"endColumn":29}],"errorCount":43,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use strict';\r\nimport $ from 'jquery';\r\n\r\nimport apMode from './apMode.js';\r\nimport stationMode from './stationMode.js';\r\nimport wispMode from './wispMode.js';\r\nimport universalrepeaterMode from './universalrepeaterMode.js';\r\nimport repeaterMode from './repeaterMode.js';\r\nimport p2mpMode from './p2mpMode.js';\r\nimport routerMode from './routerMode.js';\r\n\r\nimport '../../../common/component/FormRadioList.js';\r\nimport '../../../common/component/FormTable.js';\r\nimport '../../../common/component/FormText.js';\r\nimport '../../../common/component/FormHelpText.js';\r\n\r\nimport wizardUtil from './wizardUtil.js';\r\nimport utils from '../../../common/libs/common.js';\r\n\r\nfunction ModuleLogic() {\r\n\r\n\tlet that = this,\r\n\t\tstep = 0,\r\n\t\tcurMode = \"ap\",\r\n\t\tmacIndex = 0,\r\n\t\tscaning = false,\r\n\t\turl = {\r\n\t\t\t\"initUrl\": \"goform/getWizardInfo\",\r\n\t\t\t\"scanUrl\": \"goform/wrlScanList\",\r\n\t\t\t\"setUrl\": \"goform/setWizardInfo\"\r\n\t\t},\r\n\t\tmodeMap = {\r\n\t\t\t\"ap\": _(\"AP\"),\r\n\t\t\t\"station\": _(\"Client\"),\r\n\t\t\t\"universalrepeater\": _(\"Universal Repeater\"),\r\n\t\t\t\"wisp\": _(\"WISP\"),\r\n\t\t\t\"repeater\": _(\"Repeater\"),\r\n\t\t\t\"p2mp\": _(\"P2MP\"),\r\n\t\t\t\"router\": _(\"Router\")\r\n\t\t};\r\n\r\n\t//模式对象，每种模式对应一个对象 @added by zy\r\n\tthis.modeList = {\r\n\t\t\"ap\": null,\r\n\t\t\"station\": null,\r\n\t\t\"universalrepeater\": null,\r\n\t\t\"wisp\": null,\r\n\t\t\"repeater\": null,\r\n\t\t\"p2mp\": null,\r\n\t\t\"router\": null\r\n\t};\r\n\r\n\t//每个组件模块的组件对象分别放入一个对象里\r\n\t//上级AP无线模块组件\r\n\tthis.wirelessComp = null;\r\n\t//扫描模块组件\r\n\tthis.scanComp = null;\r\n\t//ip设置模块组件\r\n\tthis.ipComp = null;\r\n\t//ap无线模块\r\n\tthis.apWirelessComp = null;\r\n\t//接入组件\r\n\tthis.connectComp = null;\r\n\t//多重上级AP的扫描组件\r\n\tthis.multiScanComp = null;\r\n\t//第一页组件\r\n\tthis.$workmodeList;\r\n\r\n\tthis.pageData = {\r\n\t\t\"initData\": null, //初始化快速设置的数据\r\n\t\t\"scanData\": null //扫描获得的数据\r\n\t};\r\n\tlet tempData = {};\r\n\r\n\r\n\tthis.init = function () {\r\n\t\tinitHelpText();\r\n\t\tinitComponent();\r\n\t\tinitEvent();\r\n\t\tgetData();\r\n\t};\r\n\r\n\t/**\r\n\t * 初始化帮助信息\r\n\t */\r\n\tlet initHelpText = function () {\r\n\t\t$(\"#wizard-help-text\").FormHelpText({\r\n\t\t\t\"text\": [{\r\n\t\t\t\t\t\"title\": _(\"AP:\"),\r\n\t\t\t\t\t\"text\": _(\"in this mode, the device can create a wireless network for wireless devices, such as smart phones, laptops, tablets and so on.\")\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Client:\"),\r\n\t\t\t\t\t\"text\": _(\"in this mode, the device works as a wireless adapter to connect to the wireless network of upstream AP, and does not provide wireless access point.\")\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Universal Repeater:\"),\r\n\t\t\t\t\t\"text\": _(\"in this mode, this device creates a same wireless network as that of upstream AP for broader network coverage.\") + _(\"Advantage of Universal Repeater compared with Repeater mode: the WDS function is not required on upstream AP.\")\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"WISP:\"),\r\n\t\t\t\t\t\"text\": _(\"connect to an access point provided by ISP in wireless manner.\")\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Repeater:\"),\r\n\t\t\t\t\t\"text\": _(\"this device connects to multiple wired networks in wireless manner, and provides wireless access point.\") + _(\" To use the Repeater function of this device, peer AP must support WDS function, and use the same radio band as that of the device.\")\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"P2MP:\"),\r\n\t\t\t\t\t\"text\": _(\"this device connects to multiple wired networks in wireless manner, but does not provide wireless access point.\") + _(\"P2MP mode is used to achieve communication between multiple offices of an enterprise in a city.\")\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Router:\"),\r\n\t\t\t\t\t\"text\": _(\"if this device works in Router mode, the PoE LAN/WAN port works as WAN port and is used to connect to a modem.\")\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 获取页面初始数据\r\n\t */\r\n\tlet getData = function () {\r\n\t\t$.post(url.initUrl, (data) => {\r\n\t\t\tif (data.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t}\r\n\t\t\ttempData = JSON.parse(data);\r\n\t\t\tthat.pageData.initData = tempData;\r\n\t\t\tformatData();\r\n\t\t\tcurMode = tempData.mode;\r\n\t\t\tinitValue();\r\n\t\t});\r\n\t};\r\n\r\n\tlet initEvent = function () {\r\n\t\t$(\"#prevBtn\").on(\"click\", () => {\r\n\t\t\tthat.modeList[curMode].goBefore();\r\n\t\t\tif ($(\"#prevBtn\").attr(\"class\").indexOf(\"none\") !== -1) { //说明是第一步\r\n\t\t\t\tlet modeDiv = _(\"Quick Setup\");\r\n\t\t\t\t$(\".curTitle\").html(modeDiv);\r\n\t\t\t}\r\n\t\t});\r\n\t\t$(\"#nextBtn\").on(\"click\", () => {\r\n\t\t\tlet isFirst = $(\"#prevBtn\").attr(\"class\").indexOf(\"none\") !== -1 ? true : false;\r\n\t\t\tif (isFirst) { //说明是第一步\r\n\t\t\t\tlet modeDiv = _(\"Quick Setup\") + '<span class=\"arrow\">&gt;&gt;</span>' + modeMap[curMode];\r\n\t\t\t\t$(\".curTitle\").html(modeDiv);\r\n\r\n\t\t\t\tvar $html = $(\"html\").addClass('fix-ie-font-face');\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t$html.removeClass('fix-ie-font-face');\r\n\t\t\t\t}, 10);\r\n\r\n\t\t\t}\r\n\t\t\tthat.modeList[curMode].goNext();\r\n\t\t\tif (isFirst) {\r\n\t\t\t\t//使页面重新渲染，解决IE8下组件渲染过慢的问题\r\n\t\t\t\tif ($.support.leadingWhitespace) return;\r\n\r\n\t\t\t\tvar $html = $(\"html\").addClass('fix-ie-font-face');\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t$html.removeClass('fix-ie-font-face');\r\n\t\t\t\t}, 10);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(\"#reScan\").on(\"click\", function (e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tthat.scanComp.$scanTable.hide();\r\n\t\t\tgetScanList();\r\n\t\t});\r\n\t\t$(\"#multiReScan\").on(\"click\", function (e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\tthat.multiScanComp.$multiScanTable.hide();\r\n\t\t\tgetMultiScanList();\r\n\t\t});\r\n\t\t$(\"#reScan\").parent().on(\"click\", function (e) {\r\n\t\t\t//防止点击空白处也触发按钮\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\t\t//点击单扫描页面的radio自动给相应的input赋值\r\n\t\t$(\"#scanTable tbody\").on(\"click\", \"tr\", function () {\r\n\t\t\t//因为重新选择了ssid 所以无线的参数不能用以前的了，要清空\r\n\t\t\tthat.wirelessComp.reset();\r\n\r\n\t\t\tlet $this = $(this);\r\n\t\t\tlet index = $this.attr(\"data-index\");\r\n\t\t\tlet data = that.pageData.scanData[index];\r\n\t\t\tif ($.getUtf8Length(data.ssid) > 32) {\r\n\t\t\t\t$.formMessage(_(\"Only 1 to 32 characters are allowed in the selected SSID.\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t$this.find(\"input[type=radio]\")[0].checked = true;\r\n\r\n\t\t\t//给上级ap输入框赋值\r\n\t\t\tthat.scanComp.getComponent(\"remoteApSsid\").setValue(data.ssid, true);\r\n\t\t\t//给下一步的上级AP和MAC赋值\r\n\t\t\tthat.wirelessComp.getComponent(\"remoteSsid\").setValue(data.ssid);\r\n\t\t\tthat.wirelessComp.getComponent(\"remoteMac\").setValue(data.mac);\r\n\t\t\tthat.wirelessComp.getComponent(\"remoteChannel\").setValue(data.channel, true);\r\n\r\n\t\t\tlet authMap = {\r\n\t\t\t\t\"AES\": \"aes\",\r\n\t\t\t\t\"TKIP\": \"tkip\",\r\n\t\t\t\t\"TKIP&AES\": \"tkip+aes\"\r\n\t\t\t};\r\n\r\n\t\t\tthat.wirelessComp.getComponent(\"remoteSecType\").setValue(data.secType.split(\",\")[0].toLowerCase(), true);\r\n\t\t\tif (data.secType.split(\",\")[0].toLowerCase() != \"wep\" && data.secType.split(\",\")[0].toLowerCase() != \"none\") {\r\n\t\t\t\tthat.wirelessComp.getComponent(\"remoteWpaAuth\").setValue(authMap[data.secType.split(\",\")[1]], true);\r\n\t\t\t}\r\n\r\n\t\t\tthat.scanComp.selectData = that.pageData.scanData[index];\r\n\r\n\t\t});\r\n\r\n\t\t$(\"#multiScanTable tbody\").on(\"click\", \"tr\", function () {\r\n\t\t\tlet macCmp,\r\n\t\t\t\t$this = $(this),\r\n\t\t\t\tcheckBox = $this.find(\"input[type=checkbox]\")[0],\r\n\t\t\t\tloop = 0,\r\n\t\t\t\thasEmpty = false,\r\n\t\t\t\tselectVal = $(this).find(\"td\").eq(3).text(),\r\n\t\t\t\tindex = $this.attr(\"data-index\"),\r\n\t\t\t\tdata = that.pageData.scanData[index];\r\n\r\n\r\n\t\t\tif ($.getUtf8Length(data.ssid) > 32) {\r\n\t\t\t\t$.formMessage(_(\"Only 1 to 32 characters are allowed in the selected SSID.\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t//说明是点击取消的  之前已经有标记了\r\n\t\t\tif ($this.attr(\"class\").indexOf(\"mac-select-\") !== -1) {\r\n\t\t\t\tmacIndex = parseInt($this.attr(\"class\").split(\"mac-select-\")[1]);\r\n\t\t\t\tmacCmp = that.multiScanComp.getComponent(\"remoteMac\" + (macIndex + 1));\r\n\t\t\t\tmacCmp.setValue(\"\");\r\n\t\t\t\t$(this).removeClass(\"mac-select-\" + macIndex);\r\n\t\t\t\tcheckBox.checked = false;\r\n\t\t\t} else { //点击勾选的\r\n\t\t\t\tcheckBox.checked = true;\r\n\r\n\r\n\t\t\t\tfor (loop = 1; loop <= 4; loop++) {\r\n\t\t\t\t\t//之前有填写数据 ，则更新\r\n\t\t\t\t\tif (that.multiScanComp.getComponent(\"remoteMac\" + loop).getValue() == selectVal) {\r\n\t\t\t\t\t\tmacIndex = loop - 1;\r\n\t\t\t\t\t\thasEmpty = true; //设置为true能让其跳过寻找没有标签的选项\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!hasEmpty) {\r\n\t\t\t\t\tfor (loop = 1; loop <= 4; loop++) {\r\n\t\t\t\t\t\t//优先给为空的输入框赋值\r\n\t\t\t\t\t\tif (that.multiScanComp.getComponent(\"remoteMac\" + loop).getValue() == \"\") {\r\n\t\t\t\t\t\t\tmacIndex = loop - 1;\r\n\t\t\t\t\t\t\thasEmpty = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//如果没有为空的情况下，优先寻找没有标签的选项\r\n\t\t\t\tif (!hasEmpty) {\r\n\t\t\t\t\tfor (loop = 0; loop <= 3; loop++) {\r\n\t\t\t\t\t\t//==0 说明这个没有被选中过\r\n\t\t\t\t\t\tif ($(\".mac-select-\" + loop).length == 0) {\r\n\t\t\t\t\t\t\tmacIndex = loop;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//清除之前标签的记录\r\n\t\t\t\tif ($(\".mac-select-\" + macIndex).length > 0) {\r\n\t\t\t\t\t$(\".mac-select-\" + macIndex).find(\"input[type=checkbox]\")[0].checked = false;\r\n\t\t\t\t\t$(\".mac-select-\" + macIndex).removeClass(\"mac-select-\" + macIndex);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//给当前的数据打上标签   \r\n\t\t\t\t$this.addClass(\"mac-select-\" + macIndex);\r\n\r\n\t\t\t\t//然后把这行的mac赋给相应的输入框    0~3  转换为 1~4\r\n\t\t\t\tmacCmp = that.multiScanComp.getComponent(\"remoteMac\" + (macIndex + 1));\r\n\t\t\t\tmacCmp.setValue(selectVal, true);\r\n\r\n\t\t\t\t//如果是第一个，则给无线的mac及ssid赋值\r\n\t\t\t\tif (macIndex == 0) {\r\n\t\t\t\t\t//因为重新选择了ssid 所以无线的参数不能用以前的了，要清空\r\n\t\t\t\t\tthat.wirelessComp.reset();\r\n\t\t\t\t\tlet index = $this.attr(\"data-index\");\r\n\t\t\t\t\tlet data = that.pageData.scanData[index];\r\n\r\n\t\t\t\t\tthat.multiScanComp.selectData = data;\r\n\t\t\t\t\tthat.wirelessComp.getComponent(\"remoteSsid\").setValue(data.ssid);\r\n\t\t\t\t\tthat.wirelessComp.getComponent(\"remoteMac\").setValue(data.mac);\r\n\t\t\t\t\tthat.wirelessComp.getComponent(\"remoteChannel\").setValue(data.channel, true);\r\n\t\t\t\t\tlet authMap = {\r\n\t\t\t\t\t\t\"AES\": \"aes\",\r\n\t\t\t\t\t\t\"TKIP\": \"tkip\",\r\n\t\t\t\t\t\t\"TKIP&AES\": \"tkip+aes\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthat.wirelessComp.getComponent(\"remoteSecType\").setValue(data.secType.split(\",\")[0].toLowerCase(), true);\r\n\t\t\t\t\tif (data.secType.split(\",\")[0].toLowerCase() != \"wep\" && data.secType.split(\",\")[0].toLowerCase() != \"none\") {\r\n\t\t\t\t\t\tthat.wirelessComp.getComponent(\"remoteWpaAuth\").setValue(authMap[data.secType.split(\",\")[1]], true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//macIndex++\r\n\t\t\t\tmacIndex = (macIndex + 1) % 4;\r\n\t\t\t}\r\n\r\n\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 初始化页面数据\r\n\t */\r\n\tlet initValue = function () {\r\n\t\twizardUtil.changeJumpIp(tempData.lanIp);\r\n\r\n\t\t//初始化mode\r\n\t\tthat.$workmodeList.setValue(tempData.mode, true);\r\n\r\n\t\tchangeSecType();\r\n\t};\r\n\t/**\r\n\t * 给一些为空的值一个默认值\r\n\t * 主要是那些下拉框\r\n\t */\r\n\tlet formatData = function () {\r\n\t\tif (tempData.mode == \"\") {\r\n\t\t\ttempData.mode = \"ap\";\r\n\t\t}\r\n\t\tif (tempData.remoterWepAuth == \"\") {\r\n\t\t\ttempData.remoterWepAuth = \"shared\";\r\n\t\t}\r\n\t\tif (tempData.remoteDefaultkey == \"\") {\r\n\t\t\ttempData.remoteDefaultkey = \"1\";\r\n\t\t}\r\n\t\tif (tempData.remoteChannel == \"\") {\r\n\t\t\ttempData.remoteChannel = \"0\";\r\n\t\t}\r\n\t\tif (tempData.apWpaAuth == \"\") {\r\n\t\t\ttempData.apWpaAuth = \"aes\";\r\n\t\t}\r\n\t\tif (tempData.netBridge == \"\") {\r\n\t\t\ttempData.netBridge = \"1\";\r\n\t\t}\r\n\t\tif (tempData.apSecType == \"\") {\r\n\t\t\ttempData.apSecType = \"none\";\r\n\t\t}\r\n\t\t//防止在无线设置中设置了wpa模式然后传过来 显示为空的情况\r\n\t\tif (tempData.apSecType == \"wpa\" || tempData.apSecType == \"wpa2\" || tempData.apSecType == \"wep\") {\r\n\t\t\ttempData.apSecType = \"none\";\r\n\t\t}\r\n\r\n\t\tfor (let loop = 1; loop <= 4; loop++) {\r\n\t\t\tif (tempData[\"remoteWepKeyType\" + loop] == \"\") {\r\n\t\t\t\ttempData[\"remoteWepKeyType\" + loop] = \"ascii\";\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (tempData.wanType == \"\") {\r\n\t\t\ttempData.wanType = \"dhcp\";\r\n\t\t}\r\n\t\tif (!tempData.remoteApSsid) {\r\n\t\t\ttempData.remoteApSsid = tempData.remoteSsid;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 初始化组件\r\n\t */\r\n\tlet initComponent = function () {\r\n\t\t//第一页组件\r\n\t\tthat.$workmodeList = $(\"#formradiolist\").Rcomponent({\r\n\t\t\t\"dataField\": \"workMode\",\r\n\t\t\t\"defaultValue\": \"ap\",\r\n\t\t\t\"css\": \"block-label\",\r\n\t\t\t\"selectArray\": {\r\n\t\t\t\t\"ap\": modeMap[\"ap\"] + spanWrap(_(\"In this mode, the device creates a wireless network based on the current wired network.\")),\r\n\t\t\t\t\"station\": modeMap[\"station\"] + spanWrap(_(\"In this mode, the device works as a wireless adapter to connect to the wireless network of upstream AP.\")),\r\n\t\t\t\t\"universalrepeater\": modeMap[\"universalrepeater\"] + spanWrap(_(\"In this mode, this device extends an existing wireless network for broader network coverage.\")),\r\n\t\t\t\t\"wisp\": modeMap[\"wisp\"] + spanWrap(_(\"In this mode, this device connects to an access point provided by ISP in wireless manner, and provides the wireless network.\")),\r\n\t\t\t\t\"repeater\": modeMap[\"repeater\"] + spanWrap(_(\"In this mode, the device connects to multiple wired networks through wireless bridge, and provides wireless access point.\")),\r\n\t\t\t\t\"p2mp\": modeMap[\"p2mp\"] + spanWrap(_(\"In this mode, the device connects to multiple wired networks through wireless bridge, but does not provide wireless access point.\")),\r\n\t\t\t\t\"router\": modeMap[\"router\"] + spanWrap(_(\"connect to modem in wired manner, and provide network access point\"))\r\n\t\t\t},\r\n\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\tcurMode = this.value;\r\n\t\t\t\tif (tempData) {\r\n\t\t\t\t\tthat.modeList[curMode].getInitData(tempData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t//避免IE8闪烁\r\n\t\t$(\".rt-workMode\").css(\"max-width\", \"100%\");\r\n\r\n\t\t//无线设置模块组件\r\n\t\tlet tempSelect = {}; //信道的select选项\r\n\t\ttempSelect[\"0\"] = _(\"Auto\");\r\n\t\tfor (let i = 1; i <= 13; i++) {\r\n\t\t\ttempSelect[i] = (i + \"(\" + (2407 + i * 5) + \")\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * 上级无线设置的组件\r\n\t\t */\r\n\t\tthat.wirelessComp = $.componentManager({\r\n\t\t\t\"container\": \"#wireless-set\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"remoteSsid\": {\r\n\t\t\t\t\t\"required\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteMac\": {\r\n\t\t\t\t\t\"required\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteChannel\": {\r\n\t\t\t\t\t\"selectArray\": tempSelect,\r\n\t\t\t\t\t\"defaultValue\": \"0\"\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteSecType\": {\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"none\": _(\"None\"),\r\n\t\t\t\t\t\t\"wep\": _(\"WEP\"),\r\n\t\t\t\t\t\t\"wpa-psk\": _(\"WPA-PSK\"),\r\n\t\t\t\t\t\t\"wpa2-psk\": _(\"WPA2-PSK\"),\r\n\t\t\t\t\t\t\"mixed wpa/wpa2-psk\": _(\"Mixed WPA/WPA2-PSK\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"none\",\r\n\t\t\t\t\t\"changeCallBack\": changeSecType\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWpaAuth\": {\r\n\t\t\t\t\t\"defaultValue\": \"aes\",\r\n\t\t\t\t\t\"css\": \"enc-radio\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"aes\": \"AES\",\r\n\t\t\t\t\t\t\"tkip\": \"TKIP\",\r\n\t\t\t\t\t\t\"tkip+aes\": \"TKIP&AMP;AES\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWpaPassword\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"len\",\r\n\t\t\t\t\t\t\"args\": [8, 64]\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"placeholder\": _(\"Enter the password of upstream wireless network\"),\r\n\t\t\t\t\t\"maxLength\": 64\r\n\t\t\t\t},\r\n\t\t\t\t\"remoterWepAuth\": {\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"open\": _(\"Open\"),\r\n\t\t\t\t\t\t\"shared\": _(\"Shared\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"open\"\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteDefaultkey\": {\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"1\": _(\"Key 1\"),\r\n\t\t\t\t\t\t\"2\": _(\"Key 2\"),\r\n\t\t\t\t\t\t\"3\": _(\"Key 3\"),\r\n\t\t\t\t\t\t\"4\": _(\"Key 4\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"1\"\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKey1\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"wep.ascii\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"maxLength\": 26\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKeyType1\": {\r\n\t\t\t\t\t\"css\": \"wep-select\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"ascii\": \"ASCII\",\r\n\t\t\t\t\t\t\"hex\": \"Hex\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"ascii\",\r\n\t\t\t\t\t\"changeCallBack\": changeWepSecType\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKey2\": {\r\n\t\t\t\t\t\"maxLength\": 26,\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"wep.ascii\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKeyType2\": {\r\n\t\t\t\t\t\"css\": \"wep-select\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"ascii\": \"ASCII\",\r\n\t\t\t\t\t\t\"hex\": \"Hex\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"ascii\",\r\n\t\t\t\t\t\"changeCallBack\": changeWepSecType\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKey3\": {\r\n\t\t\t\t\t\"maxLength\": 26,\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"wep.ascii\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKeyType3\": {\r\n\t\t\t\t\t\"css\": \"wep-select\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"ascii\": \"ASCII\",\r\n\t\t\t\t\t\t\"hex\": \"Hex\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"ascii\",\r\n\t\t\t\t\t\"changeCallBack\": changeWepSecType\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKey4\": {\r\n\t\t\t\t\t\"maxLength\": 26,\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"wep.ascii\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteWepKeyType4\": {\r\n\t\t\t\t\t\"css\": \"wep-select\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"ascii\": \"ASCII\",\r\n\t\t\t\t\t\t\"hex\": \"Hex\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"ascii\",\r\n\t\t\t\t\t\"changeCallBack\": changeWepSecType\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * ap自己无线设置的组件\r\n\t\t */\r\n\t\tthat.apWirelessComp = $.componentManager({\r\n\t\t\t\"container\": \"#ap-wireless-set\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"apSsid\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ssid\",\r\n\t\t\t\t\t\t\"args\": [1, 32]\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"maxLength\": 32,\r\n\t\t\t\t\t\"placeholder\": _(\"Please enter a SSID\")\r\n\t\t\t\t},\r\n\t\t\t\t\"apChannel\": {\r\n\t\t\t\t\t\"selectArray\": tempSelect,\r\n\t\t\t\t\t\"defaultValue\": \"0\"\r\n\t\t\t\t},\r\n\t\t\t\t\"apSecType\": {\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"none\": _(\"None\"),\r\n\t\t\t\t\t\t\"wpa-psk\": _(\"WPA-PSK\"),\r\n\t\t\t\t\t\t\"wpa2-psk\": _(\"WPA2-PSK\"),\r\n\t\t\t\t\t\t\"mixed wpa/wpa2-psk\": _(\"Mixed WPA/WPA2-PSK\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"none\",\r\n\t\t\t\t\t\"changeCallBack\": changeApSecType\r\n\t\t\t\t},\r\n\t\t\t\t\"apWpaAuth\": {\r\n\t\t\t\t\t\"defaultValue\": \"aes\",\r\n\t\t\t\t\t\"css\": \"enc-radio\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"aes\": \"AES\",\r\n\t\t\t\t\t\t\"tkip\": \"TKIP\",\r\n\t\t\t\t\t\t\"tkip+aes\": \"TKIP&AMP;AES\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"changeCallBack\": changeApSecType\r\n\t\t\t\t},\r\n\t\t\t\t\"apPassword\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ssidPassword\",\r\n\t\t\t\t\t\t\"args\": [8, 64]\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"maxLength\": 64\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//扫描组件\r\n\t\tthat.scanComp = $.componentManager({\r\n\t\t\t\"container\": \"#scan-set\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"scanBtn\": {\r\n\t\t\t\t\t\"text\": '<a id=\"reScan\" class=\"underline-a\">' + _(\"Scan again\") + '</a><span id=\"loading\" class=\"loading\"></span>',\r\n\t\t\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\t\t\tif (this.value == \"1\") {\r\n\t\t\t\t\t\t\tgetScanList();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.scanComp.$scanTable.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteApSsid\": {\r\n\t\t\t\t\t\"placeholder\": _(\"Select the SSID you want to connect\"),\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ssid\",\r\n\t\t\t\t\t\t\"args\": [1, 32]\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"maxLength\": 32\r\n\t\t\t\t},\r\n\t\t\t\t\"netBridge\": {\r\n\t\t\t\t\t\"dataTitle\": _(\"Transparent Bridge\"),\r\n\t\t\t\t\t\"dataKey\": \"FormCheckList\",\r\n\t\t\t\t\t\"dataField\": \"FormCheckList\",\r\n\t\t\t\t\t\"defaultValue\": \"\",\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"1\": \"\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"autoValidate\": false,\r\n\t\t\t\t\t\"required\": false,\r\n\t\t\t\t\t\"renderedCallBack\": function () {\r\n\t\t\t\t\t\tthis.setValue(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tthat.scanComp.$scanTable = $(\"#scanTable\").TablePage({\r\n\t\t\t\"css\": \"scan-table\",\r\n\t\t\t\"sortFields\": [\"signal\", \"SSID\"],\r\n\t\t\t\"sortOpt\": {\r\n\t\t\t\t\"signal\": 2,\r\n\t\t\t\t\"SSID\": 1\r\n\t\t\t},\r\n\t\t\t\"customSort\": {\r\n\t\t\t\t\"secType\" (a, b, opt) {\r\n\t\t\t\t\tlet sortMap = [\"None\", \"WEP\", \"WPA-PSK\", \"WPA2-PSK\", \"Mixed WPA/WPA2-PSK\"];\r\n\t\t\t\t\tlet tpa, tpb;\r\n\r\n\t\t\t\t\tif (a.secType.indexOf(\",\") > -1) {\r\n\t\t\t\t\t\ttpa = a.secType.split(\",\")[0];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttpa = a.secType;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (b.secType.indexOf(\",\") > -1) {\r\n\t\t\t\t\t\ttpb = b.secType.split(\",\")[0];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttpb = b.secType;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (typeof opt[\"secType\"] == \"undefined\") {\r\n\t\t\t\t\t\topt[\"secType\"] = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (sortMap.indexOf(tpa) > sortMap.indexOf(tpb)) {\r\n\t\t\t\t\t\treturn opt[\"secType\"] == 1 ? 1 : -1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn opt[\"secType\"] == 1 ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"columns\": [{\r\n\t\t\t\t\t\"title\": _(\"Select\"),\r\n\t\t\t\t\t\"field\": \"index\",\r\n\t\t\t\t\t\"width\": \"60\",\r\n\t\t\t\t\t\"format\": function (index) { //生成radio\r\n\t\t\t\t\t\treturn '<input type=\"radio\" id=\"check-radio-' + index + '\" name=\"scan-radio\">';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"SSID\"),\r\n\t\t\t\t\t\"width\": \"205\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"ssid\",\r\n\t\t\t\t\t\"maxLength\": 17,\r\n\t\t\t\t\t\"parseHtml\": true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Channel\"),\r\n\t\t\t\t\t\"width\": \"60\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"channel\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"MAC Address\"),\r\n\t\t\t\t\t\"width\": \"180\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"mac\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Security Mode\"),\r\n\t\t\t\t\t\"width\": \"250\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"secType\",\r\n\t\t\t\t\t\"maxLength\": 18,\r\n\t\t\t\t\tformat(data) {\r\n\t\t\t\t\t\treturn _(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Signal Strength\"),\r\n\t\t\t\t\t\"width\": \"120\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"signal\",\r\n\t\t\t\t\t\"format\": function (signal) {\r\n\t\t\t\t\t\tlet className = \"fixed\";\r\n\t\t\t\t\t\tif (signal < -75) {\r\n\t\t\t\t\t\t\tclassName += \" signal1\";\r\n\t\t\t\t\t\t} else if (signal >= -75 && signal < -60) {\r\n\t\t\t\t\t\t\tclassName += \" signal3\";\r\n\t\t\t\t\t\t} else if (signal >= -60) {\r\n\t\t\t\t\t\t\tclassName += \" signal5\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tclassName += \" signal1\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn '<span class=\"signal-text\">' + signal + 'dBm</span><span class=\"signal ' + className + '\"></span>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"showStyle\": 2\r\n\t\t});\r\n\r\n\t\t//ip设置相关组件\r\n\t\tthat.ipComp = $.componentManager({\r\n\t\t\t\"container\": \"#ip-set\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"lanIp\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ip.all\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"lanMask\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"mask\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"lanGateway\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ip.all\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"lanDns1\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"dns.all\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"lanDns2\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"dns.all\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"required\": false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"beforeSubmit\": function () {\r\n\r\n\t\t\t\tlet lanIp = this.getComponent(\"lanIp\").getValue(),\r\n\t\t\t\t\tlanMask = this.getComponent(\"lanMask\").getValue(),\r\n\t\t\t\t\tlanGateway = this.getComponent(\"lanGateway\").getValue(),\r\n\t\t\t\t\tlanDns1 = this.getComponent(\"lanDns1\").getValue(),\r\n\t\t\t\t\tlanDns2 = this.getComponent(\"lanDns2\").getValue();\r\n\r\n\t\t\t\t//wisp模式下只要检查LAN口IP是否为网络 组播地址\r\n\t\t\t\tif (that.$workmodeList.getValue() == \"wisp\") {\r\n\t\t\t\t\tlet res = utils.checkIsVoildIpMask(\"lanIp\", lanMask, _(\"IP Address\"));\r\n\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t$.formMessage(res);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\treturn checkIpCmpValid(\"lanIp\", \"lanGateway\", lanIp, lanMask, lanGateway, lanDns1, lanDns2);\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//接入设置相关组件\r\n\t\tthat.connectComp = $.componentManager({\r\n\t\t\t\"container\": \"#connect-set\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"wanType\": {\r\n\t\t\t\t\t\"selectArray\": {\r\n\t\t\t\t\t\t\"dhcp\": _(\"DHCP (Dynamic IP)\"),\r\n\t\t\t\t\t\t\"static\": _(\"Static IP Address\"),\r\n\t\t\t\t\t\t\"pppoe\": _(\"PPPoE\")\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"defaultValue\": \"dhcp\",\r\n\t\t\t\t\t\"changeCallBack\": changeConnectType\r\n\t\t\t\t},\r\n\t\t\t\t\"staticIp\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ip.all\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"staticMask\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"mask\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"staticGateway\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"ip.all\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"staticDns1\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"dns.all\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t\"staticDns2\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"dns.all\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"required\": false\r\n\t\t\t\t},\r\n\t\t\t\t\"pppoeUser\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"pppoe\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"maxLength\": 64\r\n\t\t\t\t},\r\n\t\t\t\t\"pppoePassword\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"pppoe\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"maxLength\": 64\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"beforeSubmit\": function () {\r\n\t\t\t\tif (this.getComponent(\"wanType\").getValue() == \"static\") {\r\n\t\t\t\t\tlet staticIp = this.getComponent(\"staticIp\").getValue(),\r\n\t\t\t\t\t\tstaticMask = this.getComponent(\"staticMask\").getValue(),\r\n\t\t\t\t\t\tstaticGateway = this.getComponent(\"staticGateway\").getValue(),\r\n\t\t\t\t\t\tstaticDns1 = this.getComponent(\"staticDns1\").getValue(),\r\n\t\t\t\t\t\tstaticDns2 = this.getComponent(\"staticDns2\").getValue();\r\n\r\n\t\t\t\t\t//检查IP与网关是否在同一网段\r\n\t\t\t\t\tif (!checkIpCmpValid(\"staticIp\", \"staticGateway\", staticIp, staticMask, staticGateway, staticDns1, staticDns2)) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//检查wan口IP是否与LAN IP在同一网段\r\n\t\t\t\t\tif (that.$workmodeList.getValue() == \"wisp\") return; //wisp不需要校验，因为其后面会设置LAN IP\r\n\t\t\t\t\tif (checkIpInSameSegment(staticIp, staticMask, that.pageData.initData.lanIp, that.pageData.initData.lanMask)) {\r\n\t\t\t\t\t\t$.formMessage(_(\"The LAN IP address cannot belong to the same network segment as that of WAN IP address.\"));\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//多选扫描组件\r\n\t\tthat.multiScanComp = $.componentManager({\r\n\t\t\t\"container\": \"#multi-scan-set\",\r\n\t\t\t\"formCfg\": {\r\n\t\t\t\t\"multiScanBtn\": {\r\n\t\t\t\t\t\"text\": '<a id=\"multiReScan\" class=\"underline-a\">' + _(\"Scan again\") + '</a><span id=\"loading1\" class=\"loading none\"></span>',\r\n\t\t\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\t\t\tif (this.value == \"1\") {\r\n\t\t\t\t\t\t\tgetMultiScanList();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.multiScanComp.$multiScanTable.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteMac1\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"mac.all\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"placeholder\": _(\"Select an SSID or enter a MAC\"),\r\n\t\t\t\t\t\"changeCallBack\": function () { //当值不等于选中的值时选中取消\r\n\t\t\t\t\t\tif ($(\".mac-select-0\").length > 0 && this.value != $(\".mac-select-0\").find(\"td\").eq(3).text()) {\r\n\t\t\t\t\t\t\t$(\".mac-select-0\").find(\"input\")[0].checked = false;\r\n\t\t\t\t\t\t\t$(\".mac-select-0\").removeClass(\"mac-select-0\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteMac2\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"mac.all\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"placeholder\": _(\"Select an SSID or enter a MAC\"),\r\n\t\t\t\t\t\"required\": false,\r\n\t\t\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\t\t\tif ($(\".mac-select-1\").length > 0 && this.value != $(\".mac-select-1\").find(\"td\").eq(3).text()) {\r\n\t\t\t\t\t\t\t$(\".mac-select-1\").find(\"input\")[0].checked = false;\r\n\t\t\t\t\t\t\t$(\".mac-select-1\").removeClass(\"mac-select-1\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteMac3\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"mac.all\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"placeholder\": _(\"Select an SSID or enter a MAC\"),\r\n\t\t\t\t\t\"required\": false,\r\n\t\t\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\t\t\tif ($(\".mac-select-2\").length > 0 && this.value != $(\".mac-select-2\").find(\"td\").eq(3).text()) {\r\n\t\t\t\t\t\t\t$(\".mac-select-2\").find(\"input\")[0].checked = false;\r\n\t\t\t\t\t\t\t$(\".mac-select-2\").removeClass(\"mac-select-2\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\"remoteMac4\": {\r\n\t\t\t\t\t\"dataOptions\": [{\r\n\t\t\t\t\t\t\"type\": \"mac.all\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t\"placeholder\": _(\"Select an SSID or enter a MAC\"),\r\n\t\t\t\t\t\"required\": false,\r\n\t\t\t\t\t\"changeCallBack\": function () {\r\n\t\t\t\t\t\tif ($(\".mac-select-3\").length > 0 && this.value != $(\".mac-select-3\").find(\"td\").eq(3).text()) {\r\n\t\t\t\t\t\t\t$(\".mac-select-3\").find(\"input\")[0].checked = false;\r\n\t\t\t\t\t\t\t$(\".mac-select-3\").removeClass(\"mac-select-3\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tthat.multiScanComp.$multiScanTable = $(\"#multiScanTable\").TablePage({\r\n\t\t\t\"css\": \"scan-table\",\r\n\t\t\t\"sortFields\": [\"signal\", \"SSID\"],\r\n\t\t\t\"sortOpt\": {\r\n\t\t\t\t\"signal\": 2,\r\n\t\t\t\t\"SSID\": 1\r\n\t\t\t},\r\n\t\t\t\"customSort\": {\r\n\t\t\t\t\"secType\" (a, b, opt) {\r\n\t\t\t\t\tlet sortMap = [\"None\", \"WEP\", \"WPA-PSK\", \"WPA2-PSK\", \"Mixed WPA/WPA2-PSK\"];\r\n\t\t\t\t\tlet tpa, tpb;\r\n\r\n\t\t\t\t\tif (a.secType.indexOf(\",\") > -1) {\r\n\t\t\t\t\t\ttpa = a.secType.split(\",\")[0];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttpa = a.secType;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (b.secType.indexOf(\",\") > -1) {\r\n\t\t\t\t\t\ttpb = b.secType.split(\",\")[0];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttpb = b.secType;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (typeof opt[\"secType\"] == \"undefined\") {\r\n\t\t\t\t\t\topt[\"secType\"] = 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (sortMap.indexOf(tpa) > sortMap.indexOf(tpb)) {\r\n\t\t\t\t\t\treturn opt[\"secType\"] == 1 ? 1 : -1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn opt[\"secType\"] == 1 ? -1 : 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"columns\": [{\r\n\t\t\t\t\t\"title\": _(\"Select\"),\r\n\t\t\t\t\t\"field\": \"index\",\r\n\t\t\t\t\t\"width\": \"60\",\r\n\t\t\t\t\t\"format\": function (index) { //生成checkbox\r\n\t\t\t\t\t\treturn '<input type=\"checkbox\" id=\"check-radio-' + index + '\" name=\"multi-scan-radio\">';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"SSID\"),\r\n\t\t\t\t\t\"width\": \"205\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"ssid\",\r\n\t\t\t\t\t\"maxLength\": 17,\r\n\t\t\t\t\t\"parseHtml\": true\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Channel\"),\r\n\t\t\t\t\t\"width\": \"60\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"channel\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"MAC Address\"),\r\n\t\t\t\t\t\"width\": \"180\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"mac\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Security Mode\"),\r\n\t\t\t\t\t\"width\": \"250\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"secType\",\r\n\t\t\t\t\t\"maxLength\": 18,\r\n\t\t\t\t\tformat(data) {\r\n\t\t\t\t\t\treturn _(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"title\": _(\"Signal Strength\"),\r\n\t\t\t\t\t\"width\": \"110\",\r\n\t\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\t\"field\": \"signal\",\r\n\t\t\t\t\t\"format\": function (signal) {\r\n\t\t\t\t\t\tlet className = \"fixed\";\r\n\t\t\t\t\t\tif (signal < -75) {\r\n\t\t\t\t\t\t\tclassName += \" signal1\";\r\n\t\t\t\t\t\t} else if (signal >= -75 && signal < -60) {\r\n\t\t\t\t\t\t\tclassName += \" signal3\";\r\n\t\t\t\t\t\t} else if (signal >= -60) {\r\n\t\t\t\t\t\t\tclassName += \" signal5\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tclassName += \" signal1\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn '<span class=\"signal-text\">' + signal + 'dBm</span><span class=\"signal ' + className + '\"></span>';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"showStyle\": 2\r\n\t\t});\r\n\r\n\t\t//给每个模式传入相关的组件，以便操作\r\n\t\tthat.modeList.ap = new apMode(that.apWirelessComp);\r\n\t\tthat.modeList.station = new stationMode(that.scanComp, that.wirelessComp, that.ipComp);\r\n\t\tthat.modeList.universalrepeater = new universalrepeaterMode(that.scanComp, that.wirelessComp, that.ipComp);\r\n\t\tthat.modeList.wisp = new wispMode(that.scanComp, that.wirelessComp, that.ipComp, that.connectComp, that.apWirelessComp);\r\n\t\tthat.modeList.router = new routerMode(that.connectComp, that.apWirelessComp);\r\n\t\tthat.modeList.repeater = new repeaterMode(that.multiScanComp, that.wirelessComp, that.ipComp);\r\n\t\tthat.modeList.p2mp = new p2mpMode(that.multiScanComp, that.wirelessComp, that.ipComp);\r\n\r\n\t\t//为了解决浏览器有时候会去取缓存导致loading图片出来有延迟的问题\r\n\t\tvar img = new Image();\r\n\t\timg.src = \"/common/img/loading.gif\";\r\n\t\t// $.get(\"/common/img/loading.gif\");\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * 检查LAN口IP相关的设置是否合法\r\n\t */\r\n\tfunction checkIpCmpValid(ipEle, gateWayEle, lanIp, lanMask, lanGateway, lanDns1, lanDns2) {\r\n\t\tlet checkRes = null;\r\n\r\n\t\t//检查LAN IP是否为组播 广播地址\r\n\t\tcheckRes = utils.checkIsVoildIpMask(ipEle, lanMask, _(\"IP Address\"));\r\n\t\tif (checkRes) {\r\n\t\t\t$.formMessage(checkRes);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//检查网关是否为组播 广播地址\r\n\t\tcheckRes = utils.checkIsVoildIpMask(gateWayEle, lanMask, _(\"Gateway\"));\r\n\t\tif (checkRes) {\r\n\t\t\t$.formMessage(checkRes);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//检查ip和网关是否在同一网段  以及是否相同\r\n\t\tif (!checkIpInSameSegment(lanIp, lanMask, lanGateway, lanMask)) {\r\n\t\t\t$.formMessage(_(\"The IP address must belong to the same network segment of that of gateway.\"));\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tif (lanIp == lanGateway) {\r\n\t\t\t\t$.formMessage(_(\"The IP address cannot be the same as the gateway.\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//检查DNS是否一样\r\n\t\tif (lanDns1 == lanDns2) {\r\n\t\t\t$.formMessage(_(\"Primary DNS Server and Secondary DNS Server can't be the same.\"));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t//检查DNS是否和IP一样 \r\n\t\tif (lanIp == lanDns1 || lanIp == lanDns2) {\r\n\t\t\t$.formMessage(_(\"Primary DNS Server and Secondary DNS Server can't be the same with IP address.\"));\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * 改变wep密码格式时，需要将相应的校验规则修改 \r\n\t */\r\n\tfunction changeWepSecType() {\r\n\t\tlet id = this.$element.attr(\"id\");\r\n\t\tlet index = id[id.length - 1];\r\n\r\n\t\tlet selector = \"remoteWepKey\" + index;\r\n\t\tlet keyX = that.wirelessComp.getComponent(selector);\r\n\t\tkeyX.removeValidateText();\r\n\t\tkeyX.option.dataOptions = [{\r\n\t\t\t\"type\": \"wep.\" + this.value\r\n\t\t}];\r\n\t}\r\n\r\n\t/**\r\n\t * 获取wifi扫描信息并生产表格\r\n\t */\r\n\tfunction getScanList() {\r\n\t\tvar ii;\r\n\t\t$(\"#loading\").removeClass(\"none\");\r\n\t\tif (!scaning) {\r\n\t\t\tscaning = true;\r\n\t\t\t$.post(url.scanUrl, function (obj) {\r\n\t\t\t\tif (obj.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tthat.scanComp.$scanTable.show();\r\n\t\t\t\t\t$(\"#loading\").addClass(\"none\");\r\n\t\t\t\t\tobj = JSON.parse(obj);\r\n\t\t\t\t\tobj = obj.ssidList;\r\n\t\t\t\t\tfor (ii = 0; ii < obj.length; ii++) {\r\n\t\t\t\t\t\t//信道要变成整形   因为组件暂时只支持字符串排序\r\n\t\t\t\t\t\tobj[ii].channel = parseInt(obj[ii].channel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.pageData.scanData = obj;\r\n\t\t\t\t\tthat.scanComp.$scanTable.reLoad(obj);\r\n\t\t\t\t\t//避免多次点击扫描按钮\r\n\t\t\t\t\tthat.scanComp.getComponent(\"scanBtn\").setValue(\"1\");\r\n\t\t\t\t\tscaning = false;\r\n\t\t\t\t}, 1000);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 获取wifi扫描信息并生产表格\r\n\t */\r\n\tfunction getMultiScanList() {\r\n\t\t$(\"#loading1\").removeClass(\"none\");\r\n\t\tvar ii;\r\n\t\tif (!scaning) {\r\n\t\t\tscaning = true;\r\n\t\t\t$.post(url.scanUrl, function (obj) {\r\n\t\t\t\tif (obj.indexOf(\"<!DOC\") > -1) {\r\n\t\t\t\t\twindow.location.href = \"login.html\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tthat.multiScanComp.$multiScanTable.show();\r\n\t\t\t\t\t$(\"#loading1\").addClass(\"none\");\r\n\t\t\t\t\tobj = JSON.parse(obj);\r\n\t\t\t\t\tobj = obj.ssidList;\r\n\r\n\t\t\t\t\t//1对多只能出现wep和未加密的wifi信号\r\n\t\t\t\t\tfor (let i = 0; i < obj.length; i++) {\r\n\t\t\t\t\t\tif (!(obj[i].secType.toLowerCase() == \"none\" || obj[i].secType.toLowerCase() == \"wep\")) {\r\n\t\t\t\t\t\t\tobj.splice(i, 1);\r\n\t\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (ii = 0; ii < obj.length; ii++) {\r\n\t\t\t\t\t\t//信道要变成整形   因为组件暂时只支持字符串排序\r\n\t\t\t\t\t\tobj[ii].channel = parseInt(obj[ii].channel);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.pageData.scanData = obj;\r\n\t\t\t\t\tthat.multiScanComp.$multiScanTable.reLoad(obj);\r\n\t\t\t\t\t//避免多次点击扫描按钮\r\n\t\t\t\t\tthat.multiScanComp.getComponent(\"multiScanBtn\").setValue(\"1\");\r\n\t\t\t\t\tscaning = false;\r\n\t\t\t\t}, 1000);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 切换ap加密模式时  若加密模式为不加密隐藏密码及加密方式   若为WPA-PSK  AES&TKIP需要变为不可选   @added by zy\r\n\t */\r\n\tfunction changeApSecType() {\r\n\t\tlet comp = that.apWirelessComp;\r\n\t\tlet $encType = comp.getComponent(\"apWpaAuth\");\r\n\t\tlet $secType = comp.getComponent(\"apSecType\");\r\n\t\tlet $password = comp.getComponent(\"apPassword\");\r\n\r\n\t\t//除了WPA模式下混合加密都是允许的\r\n\t\t$(\"#apWpaAuth\").find(\"input\").eq(2).removeAttr(\"disabled\");\r\n\t\tswitch ($secType.getValue()) {\r\n\t\t\tcase \"none\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$encType.hide();\r\n\t\t\t\t\t$password.hide();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wpa-psk\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$encType.show();\r\n\t\t\t\t\t$password.show();\r\n\t\t\t\t\tif ($encType.getValue() == \"tkip+aes\") {\r\n\t\t\t\t\t\t$encType.setValue(\"aes\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(\"#apWpaAuth\").find(\"input\").eq(2).attr(\"disabled\", \"disabled\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wpa2-psk\":\r\n\t\t\tcase \"mixed wpa/wpa2-psk\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$encType.show();\r\n\t\t\t\t\t$password.show();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 切换上级加密模式时  若加密模式为不加密隐藏密码及加密方式   若为WPA-PSK  AES&TKIP需要变为不可选   @added by zy\r\n\t */\r\n\tfunction changeSecType() {\r\n\t\tlet comp = that.wirelessComp;\r\n\t\tlet $encType = comp.getComponent(\"remoteWpaAuth\");\r\n\t\tlet $secType = comp.getComponent(\"remoteSecType\");\r\n\t\tlet $password = comp.getComponent(\"remoteWpaPassword\");\r\n\t\tlet $wepPassword1 = comp.getComponent(\"remoteWepKey1\");\r\n\t\tlet $wepPassword2 = comp.getComponent(\"remoteWepKey2\");\r\n\t\tlet $wepPassword3 = comp.getComponent(\"remoteWepKey3\");\r\n\t\tlet $wepPassword4 = comp.getComponent(\"remoteWepKey4\");\r\n\r\n\t\t//隐藏这个是为了不让验证函数去验证\r\n\t\t$wepPassword1.hide();\r\n\t\t$wepPassword2.hide();\r\n\t\t$wepPassword3.hide();\r\n\t\t$wepPassword4.hide();\r\n\r\n\t\t//除了WPA模式下混合加密都是允许的\r\n\t\t$(\"#wireless-enctype\").find(\"input\").eq(2).removeAttr(\"disabled\");\r\n\t\tswitch ($secType.getValue()) {\r\n\t\t\tcase \"none\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$encType.hide();\r\n\t\t\t\t\t$password.hide();\r\n\t\t\t\t\t$(\".wep-wrap\").addClass(\"none\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wep\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$wepPassword1.show();\r\n\t\t\t\t\t$wepPassword2.show();\r\n\t\t\t\t\t$wepPassword3.show();\r\n\t\t\t\t\t$wepPassword4.show();\r\n\t\t\t\t\t$encType.hide();\r\n\t\t\t\t\t$password.hide();\r\n\t\t\t\t\t$(\".wep-wrap\").removeClass(\"none\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wpa-psk\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$encType.show();\r\n\t\t\t\t\t$password.show();\r\n\t\t\t\t\t$(\".wep-wrap\").addClass(\"none\");\r\n\t\t\t\t\tif ($encType.getValue() == \"tkip+aes\") {\r\n\t\t\t\t\t\t$encType.setValue(\"aes\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(\"#wireless-enctype\").find(\"input\").eq(2).attr(\"disabled\", \"disabled\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wpa2-psk\":\r\n\t\t\tcase \"mixed wpa/wpa2-psk\":\r\n\t\t\t\t{\r\n\t\t\t\t\t$encType.show();\r\n\t\t\t\t\t$password.show();\r\n\t\t\t\t\t$(\".wep-wrap\").addClass(\"none\");\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 切换接入方式  pppoe dhcp static\r\n\t */\r\n\tfunction changeConnectType() {\r\n\t\tlet comp = that.connectComp,\r\n\t\t\t$wanType = comp.getComponent(\"wanType\"),\r\n\t\t\t$pppoeUser = comp.getComponent(\"pppoeUser\"),\r\n\t\t\t$pppoePassword = comp.getComponent(\"pppoePassword\");\r\n\r\n\t\tswitch ($wanType.getValue()) {\r\n\t\t\tcase \"dhcp\":\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (var prop in comp.components) {\r\n\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t\t//除了这两个属性都要隐藏\r\n\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {\r\n\t\t\t\t\t\t\t\tcomp.components[prop].hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"static\":\r\n\t\t\t\t{\r\n\t\t\t\t\t//将pppoe的两个隐藏\r\n\t\t\t\t\t$pppoeUser.hide();\r\n\t\t\t\t\t$pppoePassword.hide();\r\n\t\t\t\t\tfor (var prop in comp.components) {\r\n\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t\t//除了这两个属性都要show\r\n\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\" && prop != \"pppoePassword\" && prop != \"pppoeUser\") {\r\n\t\t\t\t\t\t\t\tcomp.components[prop].show();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"pppoe\":\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (var prop in comp.components) {\r\n\t\t\t\t\t\tif (comp.components.hasOwnProperty(prop)) {\r\n\t\t\t\t\t\t\t//除了这两个属性都要隐藏\r\n\t\t\t\t\t\t\tif (prop != \"wanType\" && prop != \"isSingle\") {\r\n\t\t\t\t\t\t\t\tcomp.components[prop].hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$pppoeUser.show();\r\n\t\t\t\t\t$pppoePassword.show();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tfunction spanWrap(str) {\r\n\t\treturn '&nbsp;&nbsp;&nbsp;<span class=\"help-block controls-text\">' + str + '</span>';\r\n\t}\r\n}\r\nmodule.exports = new ModuleLogic();"},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wizard\\js\\wizardUtil.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wrl_basic\\js\\wrl_advance.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wrl_basic\\js\\wrl_basic.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"E:\\Practice\\r-check\\r-check\\test\\O3V2.0\\app\\module\\wrl_basic\\js\\wrl_filter.js","messages":[],"errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0}]